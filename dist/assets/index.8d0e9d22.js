import{d as j,r as s,o as t,h as a,q as l,F as N,E,n as O,Y as M,B as I,z as k,g as n,_ as w,i as y,p as Y,m as G,C as J,e as z,w as S,u as K,c as Q,y as W,M as R}from"./index.c5b6faf2.js";import{z as X,A as Z}from"./liveIn.c94c5d2b.js";import{g as ee}from"./permission.69e815b3.js";import{z as te}from"./serve.04eebc9f.js";import{N as H}from"./index.ea73f821.js";const ae={class:"headBox"},se=["onClick"],le={key:0,class:"value"},oe=j({__name:"SwitchBartop",props:{data:{type:Array,default:[]},routeType:{type:String,default:null},bedSelectData:{type:Object,default:()=>({})}},emits:["changeId","handleFloorEdit"],setup(c,{expose:g,emit:m}){const i=m,o=s(0),f=s(!1),u=(h,e)=>{f.value=!0,o.value=e,i("changeId",h,e,!0)};return g({currentId:o}),(h,e)=>(t(),a("div",ae,[l("div",{class:O(["sw-box",c.routeType==="config"?"configTpye":""])},[(t(!0),a(N,null,E(c.data,(p,d)=>(t(),a("span",{key:d,class:O({title:!0,line:o.value==d}),onClick:M(v=>u(p.id,d),["stop"])},[I(k(p.name),1),p.value?(t(),a("span",le,k(p.value),1)):n("v-if",!0)],10,se))),128))],2)]))}});var ue=w(oe,[["__scopeId","data-v-208275a0"],["__file","D:/project/2023/project-zzyl-v2.1/project-zzyl-admin-vue3-java/src/pages/serve/task/oldPeople/components/SwitchBartop.vue"]]);const ne=c=>(Y("data-v-4f0a6f18"),c=c(),G(),c),re={key:0},ce={key:0,class:"houseList"},de={class:"title"},ie={class:"lText"},pe={class:"name"},ve=["onClick"],_e={class:"bedList"},me={key:0},fe={class:"bedText"},he={key:0,class:"care"},ye={key:1,class:"care noCare"},be=ne(()=>l("span",null,"\u5F53\u524D\u5E8A\u4F4D\u6CA1\u6709\u5B89\u6392\u62A4\u7406\u5458",-1)),ge=["onClick"],Fe={key:1,class:"noData"},Ce={key:1},ke=j({__name:"List",props:{baseData:{type:Array},floorData:{type:Array},routeType:{type:String,default:null}},emits:["handleCheck","handleSelectOlder","handleSingleOlder"],setup(c,{emit:g}){const m=g,i=(o,f)=>{console.log(o,"roomItem"),m("handleCheck"),m("handleSelectOlder",f==="single"?[o]:o.bedVoList),f==="single"&&m("handleSingleOlder",o.userVos.map(u=>u.id))};return(o,f)=>c.floorData.length?(t(),a("div",re,[n(" end "),n(" \u623F\u95F4\u5217\u8868 "),c.baseData.length?(t(),a("div",ce,[(t(!0),a(N,null,E(c.baseData,(u,h)=>(t(),a("div",{key:h,class:"item"},[n(" \u623F\u95F4\u6807\u9898 "),l("div",de,[l("div",ie,[l("span",pe,k(u.code),1)]),l("div",{class:"batchSetting",onClick:e=>i(u,"batch")}," \u6279\u91CF\u8BBE\u7F6E\u62A4\u7406\u5458 ",8,ve)]),n("  "),n(" \u5E8A\u4F4D\u5217\u8868 "),l("div",_e,[u.bedVoList&&u.bedVoList.length?(t(),a("div",me,[l("ul",null,[(t(!0),a(N,null,E(u.bedVoList.filter(e=>e.name).filter(e=>e.bedStatus===1),(e,p)=>{var d;return t(),a("li",{key:p,class:O(["leisure",c.routeType!=="config"?"":"bedNoHover"])},[n(' <div class="bedIcon"><span class="leisureIcon"></span></div> '),l("div",fe,[l("p",null,"\u5E8A\u4F4D\u53F7\uFF1A"+k(e.bedNumber),1),l("p",null,k(e.name?"\u8001\u4EBA\u59D3\u540D\uFF1A"+e.name:"\u7A7A\u95F2"),1),e.userVos&&e.userVos.length?(t(),a("p",he,[I(" \u62A4\u7406\u5458\u59D3\u540D\uFF1A "),(t(!0),a(N,null,E((d=e.userVos)==null?void 0:d.map(v=>v.realName),(v,b)=>(t(),a("span",{key:b},k(v),1))),128))])):(t(),a("p",ye,[I(" \u62A4\u7406\u4EBA\u59D3\u540D\uFF1A "),be]))]),l("div",{class:"setting",onClick:v=>i(e,"single")},null,8,ge)],2)}),128))])])):(t(),a("div",Fe,"\u5F53\u524D\u623F\u95F4\u6CA1\u6709\u5B89\u6392\u5E8A\u4F4D"))]),n(" end ")]))),128))])):(t(),a(N,{key:1},[n(" end "),l("div",null,[y(H)])],2112))])):(t(),a("div",Ce,[y(H)]))}});var Ae=w(ke,[["__scopeId","data-v-4f0a6f18"],["__file","D:/project/2023/project-zzyl-v2.1/project-zzyl-admin-vue3-java/src/pages/serve/task/oldPeople/components/List.vue"]]);const Be={class:"dialog-form"},De={class:"dialogCenter"},Se=l("div",null,[l("button",{class:"bt bt-grey wt-60",type:"reset"},"\u53D6\u6D88"),l("button",{theme:"primary",type:"submit",class:"bt wt-60"},[l("span",null,"\u786E\u5B9A")])],-1),Ne=j({__name:"CheckRoom",props:{visible:{type:Boolean,default:!1},data:{type:Object,default:()=>({})},singleNurse:{type:Object,default:()=>[]}},emits:["handleClose","handleSubmit"],setup(c,{expose:g,emit:m}){const i=c,o=m,f=s("empty"),u=s(),h=s(!1),e=s({}),p={bedNumber:[{required:!0,message:"\u62A4\u7406\u5458\u4E3A\u7A7A\uFF0C\u8BF7\u9009\u62E9\u62A4\u7406\u5458",type:"error",trigger:"blur"},{validator:_=>_&&_.length<0?{result:!1,message:"\u8BF7\u9009\u62E9\u62A4\u7406\u5458",type:"error"}:!0}]};J(()=>i.visible,()=>{h.value=i.visible,e.value.bedNumber=i.singleNurse,console.log(i.singleNurse,"val")});const d=_=>{_.validateResult===!0&&o("handleSubmit",e.value.bedNumber)},v=_=>{e.value.bedNumber=_,console.log(_,"-----------")},b=()=>{u.value.reset()},A=()=>{b(),o("handleClose")};return g({handleClear:b}),(_,C)=>{const L=z("t-select"),x=z("t-form-item"),V=z("t-form"),B=z("t-dialog");return t(),a("div",Be,[y(B,{visible:h.value,"onUpdate:visible":C[1]||(C[1]=D=>h.value=D),header:"\u8BBE\u7F6E\u62A4\u7406\u5458",footer:!1,"on-close":A},{body:S(()=>[n(" \u8868\u5355\u5185\u5BB9 "),l("div",De,[y(V,{ref_key:"form",ref:u,data:e.value,rules:p,"label-width":90,"on-cancel":"onClickCloseBtn","reset-type":f.value,onReset:A,onSubmit:d},{default:S(()=>[y(x,{label:"\u62A4\u7406\u5458\u59D3\u540D\uFF1A",name:"bedNumber"},{default:S(()=>[y(L,{modelValue:e.value.bedNumber,"onUpdate:modelValue":C[0]||(C[0]=D=>e.value.bedNumber=D),class:"wt-400",placeholder:"\u8BF7\u8F93\u5165",clearable:"",filterable:"",multiple:"",max:4,options:c.data,onChange:v},{default:S(()=>[n(` <t-option\r
                  v-for="(item, index) in data"\r
                  :key="index"\r
                  :value="item.id"\r
                  :label="item.realName"\r
                  title=""\r
                >\r
                  {{ item.realName }}\r
                </t-option> `)]),_:1},8,["modelValue","options"])]),_:1}),y(x,{class:"dialog-footer"},{default:S(()=>[Se]),_:1})]),_:1},8,["data","reset-type"])])]),_:1},8,["visible"])])}}});var xe=w(Ne,[["__file","D:/project/2023/project-zzyl-v2.1/project-zzyl-admin-vue3-java/src/pages/serve/task/oldPeople/components/CheckRoom.vue"]]);const ze={class:"min-h bg-wt pd-main br-2"},Ee=j({__name:"index",setup(c){const g=K(),m=Q(),i=s(null),o=s([]),f=s([]),u=s(""),h=s(null),e=s(!1),p=s(!1),d=s(null),v=s([]),b=s([]),A=s(null),_=s([]);W(()=>{m.query.type!==void 0&&(d.value=m.query.type),B(),V()});const C=r=>{b.value=r},L=r=>{v.value=r},x=async r=>{const F=v.value.map(q=>({elderId:q.elderId,nursingIds:r})),T=await te(F);T.code===200?(R.success("\u8BBE\u7F6E\u6210\u529F"),B(),$(),A.value.handleClear()):R.error(T.msg)},V=async()=>{const r=await ee({deptNo:"100001005000000"});_.value=r.data.map(F=>({value:F.id,label:F.realName}))},B=async()=>{const r=await X();r.code===200&&(o.value=r.data,u.value===""&&(u.value=o.value[0].id),D())},D=async()=>{p.value=!0;try{const r=await Z(u.value);r.code===200&&(f.value=r.data)}finally{p.value=!1}},P=(r,F)=>{h.value=F,u.value=r,B(),g.setFloorInfo({})},U=()=>{e.value=!0},$=()=>{e.value=!1,v.value=[],b.value=[]};return(r,F)=>(t(),a("div",ze,[n(" \u697C\u5C42tab\u5BFC\u822A "),y(ue,{ref_key:"tabBar",ref:i,data:o.value,"route-type":d.value,onChangeId:P},null,8,["data","route-type"]),n(" end "),n(" \u623F\u578B\u5217\u8868 "),y(Ae,{"base-data":f.value,"floor-data":o.value,"route-type":d.value,onHandleCheck:U,onHandleSelectOlder:L,onHandleSingleOlder:C},null,8,["base-data","floor-data","route-type"]),n(" \u67E5\u770B\u623F\u95F4 "),y(xe,{ref_key:"formRef",ref:A,visible:e.value,data:_.value,singleNurse:b.value,onHandleClose:$,onHandleSubmit:x},null,8,["visible","data","singleNurse"]),n(" end "),n(" end ")]))}});var Ie=w(Ee,[["__file","D:/project/2023/project-zzyl-v2.1/project-zzyl-admin-vue3-java/src/pages/serve/task/oldPeople/index.vue"]]);export{Ie as default};
