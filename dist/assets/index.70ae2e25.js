import{d as N,e as d,o as z,h as x,q as _,i as l,w as u,B as E,z as S,n as j,A as V,g,f as R,_ as A,r as o,C as K,c as W,y as $,M as L}from"./index.c5b6faf2.js";import{z as O}from"./commonData.8892e613.js";import{c as U,d as I}from"./date.a9e2d8fb.js";import{l as H,m as q}from"./intelligence.a10604ee.js";import{S as M}from"./switchBar.3a8341ea.js";import{N as P}from"./index.ea73f821.js";const G=[{title:"\u5E8F\u53F7",align:"left",width:80,minWidth:80,colKey:"rowIndex"},{title:"\u8BBE\u5907\u540D\u79F0",minWidth:180,colKey:"deviceName"},{title:"\u5907\u6CE8\u540D\u79F0",minWidth:180,colKey:"nickname"},{title:"\u6240\u5C5E\u4EA7\u54C1",minWidth:200,colKey:"productName"},{title:"\u62A5\u8B66\u6570\u636E\u7C7B\u578B",minWidth:180,colKey:"type"},{title:"\u63A5\u5165\u4F4D\u7F6E",minWidth:180,colKey:"accessLocation"},{title:"\u6570\u636E\u503C",minWidth:180,colKey:"dataValue"},{title:"\u62A5\u8B66\u65F6\u95F4",minWidth:200,colKey:"createTime"},{title:"\u62A5\u8B66\u89C4\u5219",minWidth:200,colKey:"alertReason"},{title:"\u5904\u7406\u7ED3\u679C",minWidth:320,ellipsis:!0,colKey:"processingResult"},{title:"\u5904\u7406\u4EBA",minWidth:180,colKey:"processorName"},{title:"\u5904\u7406\u65F6\u95F4",minWidth:300,colKey:"processingTime"},{title:"\u72B6\u6001",colKey:"status",width:120,minWidth:"120px",cell:(n,{row:v})=>{const s={1:{label:"\u5DF2\u5904\u7406"},0:{label:"\u5F85\u5904\u7406"}};return n("span",{class:`status-dot status-dot-${v.status}`},s[v.status].label)}},{align:"left",fixed:"right",width:65,minWidth:"65px",colKey:"op",title:"\u64CD\u4F5C"}],J={class:"baseList"},Q={class:"tableBoxs"},X={class:"operateCon"},Y=["onClick"],Z="index",ee=N({__name:"TableList",props:{listData:{type:Object,default:()=>[]},total:{type:Number,default:0},pagination:{type:Object,default:()=>({})},dataLoading:{type:Boolean,default:!1}},emits:["handleOpen","getCurrent","handleCancelOpen"],setup(n,{emit:v}){const s=v,h=r=>{r.status==="0"&&s("handleOpen",r)},i=r=>{s("getCurrent",r)};return(r,m)=>{const b=d("t-table"),c=d("t-pagination");return z(),x("div",J,[_("div",Q,[l(b,{data:n.listData,columns:V(G),"row-key":Z,"vertical-align":"middle",hover:!0,loading:n.dataLoading,"table-layout":"fixed","table-content-width":"100%"},{rowIndex:u(({rowIndex:a})=>[E(S(a+1),1)]),type:u(({row:a})=>[E(S(a.type===0?"\u8001\u4EBA\u5F02\u5E38\u6570\u636E":"\u8BBE\u5907\u5F02\u5E38\u6570\u636E"),1)]),processingResult:u(({row:a})=>[E(S(a.processingResult?a.processingResult:"--"),1)]),processorName:u(({row:a})=>[E(S(a.processorName?a.processorName:"--"),1)]),processingTime:u(({row:a})=>[E(S(a.processingTime?a.processingTime:"--"),1)]),op:u(({row:a})=>[_("div",X,[_("a",{class:j(["font-bt",a.status==="1"?"disabled":""]),onClick:e=>h(a)},"\u5904\u7406",10,Y)])]),empty:u(()=>[l(P)]),_:1},8,["data","columns","loading"]),g(" \u5206\u9875 "),n.total>10?(z(),R(c,{key:0,modelValue:n.pagination.pageNum,"onUpdate:modelValue":m[0]||(m[0]=a=>n.pagination.pageNum=a),pageSize:n.pagination.pageSize,"onUpdate:pageSize":m[1]||(m[1]=a=>n.pagination.pageSize=a),total:n.total,onChange:i},null,8,["modelValue","pageSize","total"])):g("v-if",!0),g(" end ")])])}}});var te=A(ee,[["__file","D:/project/2023/project-zzyl-v2.1/project-zzyl-admin-vue3-java/src/pages/intelligence/facility/components/TableList.vue"]]);const ae={class:"formBox"},le=N({__name:"SearchForm",props:{searchData:{type:Object,default:()=>({})}},emits:["handleSearch","handleReset","handleClear"],setup(n,{emit:v}){const s=v,h=o(null),i=o([]),r=()=>{h.value.reset(),i.value=[],s("handleReset")},m=()=>{s("handleSearch",i.value)},b=(a,e)=>{e.trigger==="clear"&&s("handleClear",e.trigger)},c=a=>{i.value=[],s("handleClear",a)};return(a,e)=>{const p=d("t-input"),F=d("t-form-item"),C=d("t-col"),y=d("t-date-range-picker"),D=d("t-row"),B=d("t-form");return z(),x("div",ae,[l(B,{ref_key:"form",ref:h,model:n.searchData,"label-width":68},{default:u(()=>[l(D,null,{default:u(()=>[l(C,null,{default:u(()=>[l(F,{label:"\u8BBE\u5907\u540D\u79F0\uFF1A",name:"deviceName"},{default:u(()=>[l(p,{modelValue:n.searchData.deviceName,"onUpdate:modelValue":e[0]||(e[0]=f=>n.searchData.deviceName=f),class:"form-item-content",type:"search",placeholder:"\u8BF7\u8F93\u5165",clearable:"",onClear:e[1]||(e[1]=f=>c("deviceName"))},null,8,["modelValue"])]),_:1})]),_:1}),l(C,null,{default:u(()=>[l(F,{label:"\u62A5\u8B66\u65F6\u95F4\uFF1A",name:"timeData"},{default:u(()=>[l(y,{modelValue:i.value,"onUpdate:modelValue":e[2]||(e[2]=f=>i.value=f),placeholder:["\u5F00\u59CB\u65E5\u671F","\u7ED3\u675F\u65E5\u671F"],clearable:"",onChange:b},null,8,["modelValue"])]),_:1})]),_:1}),g(" \u6309\u94AE\u533A\u57DF "),l(C,{class:"searchBtn"},{default:u(()=>[_("button",{type:"button",class:"bt-grey wt-60",onClick:e[3]||(e[3]=f=>r())}," \u91CD\u7F6E "),_("button",{type:"button",class:"bt wt-60",onClick:e[4]||(e[4]=f=>m())}," \u641C\u7D22 ")]),_:1})]),_:1})]),_:1},8,["model"])])}}});var ue=A(le,[["__file","D:/project/2023/project-zzyl-v2.1/project-zzyl-admin-vue3-java/src/pages/intelligence/facility/components/SearchForm.vue"]]);const ne={class:"dialog-form"},oe={class:"dialogCenter"},se=_("div",null,[_("button",{class:"bt bt-grey wt-60",type:"reset"},"\u53D6\u6D88"),_("button",{theme:"primary",type:"submit",class:"bt wt-60"},[_("span",null,"\u786E\u5B9A")])],-1),ie=N({__name:"DialogFrom",props:{visible:{type:Boolean,default:!1}},emits:["handleClose","handleSub"],setup(n,{expose:v,emit:s}){const h=n,i=s,r=o("empty"),m=o(),b=o(!1),c=o({}),a={processingTime:[{required:!0,message:"\u5904\u7406\u65F6\u95F4\u4E3A\u7A7A\uFF0C\u8BF7\u9009\u62E9\u5904\u7406\u65F6\u95F4",type:"error",trigger:"change"}],processingResult:[{required:!0,message:"\u5904\u7406\u7ED3\u679C\u4E3A\u7A7A\uFF0C\u8BF7\u8F93\u5165\u5904\u7406\u7ED3\u679C",type:"error",trigger:"blur"}]};K(()=>h.visible,()=>{b.value=h.visible});const e=C=>{C.validateResult===!0&&i("handleSub",c.value)},p=()=>{m.value.reset()},F=()=>{p(),i("handleClose")};return v({handleClear:p}),(C,y)=>{const D=d("t-date-picker"),B=d("t-form-item"),f=d("t-textarea"),w=d("t-form"),k=d("t-dialog");return z(),x("div",ne,[l(k,{visible:b.value,"onUpdate:visible":y[2]||(y[2]=t=>b.value=t),header:"\u586B\u5199\u5904\u7406\u7ED3\u679C",footer:!1,"on-close":F},{body:u(()=>[g(" \u8868\u5355\u5185\u5BB9 "),_("div",oe,[l(w,{ref_key:"form",ref:m,data:c.value,rules:a,"label-width":108,"on-cancel":"onClickCloseBtn","reset-type":r.value,onReset:F,onSubmit:e},{default:u(()=>[l(B,{label:"\u5904\u7406\u65F6\u95F4\uFF1A",name:"processingTime"},{default:u(()=>[l(D,{modelValue:c.value.processingTime,"onUpdate:modelValue":y[0]||(y[0]=t=>c.value.processingTime=t),placeholder:"\u8BF7\u9009\u62E9","enable-time-picker":"","allow-input":"",clearable:"",class:"wt-400"},null,8,["modelValue"])]),_:1}),l(B,{label:"\u5904\u7406\u7ED3\u679C\uFF1A",name:"processingResult"},{default:u(()=>[l(f,{modelValue:c.value.processingResult,"onUpdate:modelValue":y[1]||(y[1]=t=>c.value.processingResult=t),class:"wt-400",placeholder:"\u8BF7\u8F93\u5165",maxlength:100},null,8,["modelValue"])]),_:1}),l(B,{class:"dialog-footer"},{default:u(()=>[se]),_:1})]),_:1},8,["data","reset-type"])])]),_:1},8,["visible"])])}}});var re=A(ie,[["__file","D:/project/2023/project-zzyl-v2.1/project-zzyl-admin-vue3-java/src/pages/intelligence/facility/components/DialogFrom.vue"]]);const ce={class:"min-h bg-wt"},de={class:"marg-main newBox"},me=N({__name:"index",setup(n){const v=W(),s=o([]),h=o(!1),i=o(0),r=o(!1),m=o(""),b=o(null),c=o(null),a=o(null),e=o({pageSize:10,pageNum:1});$(()=>{v.query.id&&(e.value.id=v.query.id),p()});const p=async()=>{h.value=!1;try{const t=await H(e.value);s.value=t.data.records,console.log(t.data),i.value=Number(t.data.total)}finally{h.value=!1}},F=async t=>{(await q(t,m.value)).code===200&&(L.success("\u64CD\u4F5C\u6210\u529F"),f(),c.value.handleClear(),p())},C=t=>{e.value.pageNum=1,t.length>0&&(e.value.startTime=U(t[0]),e.value.endTime=I(t[1])),p()},y=()=>{a.value.currentId=0,e.value={pageSize:10,pageNum:1},p()},D=t=>{e.value.pageNum=t.current,e.value.pageSize=t.pageSize,p()},B=t=>{m.value=t.id,r.value=!0},f=()=>{r.value=!1},w=t=>{b.value=t,e.value.pageNum=1,t===0||t===1?e.value.status=t:delete e.value.status,p()},k=t=>{t==="deviceName"?delete e.value.deviceName:t==="clear"&&(delete e.value.startTime,delete e.value.endTime),e.value={...e.value},p()};return(t,T)=>(z(),x("div",ce,[g(" \u7B5B\u9009\u533A\u57DF "),l(ue,{"search-data":e.value,onHandleSearch:C,onHandleReset:y,onHandleClear:k},null,8,["search-data"]),g(" end "),g(" tab\u5BFC\u822A "),_("div",de,[l(M,{ref_key:"tabBar",ref:a,data:V(O),onChangeId:w},null,8,["data"])]),g(" \u8868\u683C "),l(te,{"list-data":s.value,pagination:e.value,total:i.value,onGetCurrent:D,onHandleOpen:B},null,8,["list-data","pagination","total"]),g(" end "),g(" \u5904\u7406\u7ED3\u679C\u5F39\u7A97 "),l(re,{ref_key:"formRef",ref:c,visible:r.value,onHandleClose:f,onHandleSub:F},null,8,["visible"]),g(" end ")]))}});var ye=A(me,[["__file","D:/project/2023/project-zzyl-v2.1/project-zzyl-admin-vue3-java/src/pages/intelligence/facility/index.vue"]]);export{ye as default};
