import{d as A,b as L,u as I,e as f,o as r,h,q as $,i as s,w as i,B as z,z as V,A as x,g as y,f as K,_ as W,r as b,y as H,F as j,E as N}from"./index.c5b6faf2.js";import{j as U,k as M}from"./date.a9e2d8fb.js";import{j as O,m as R,n as q}from"./commonData.8892e613.js";import{c as G}from"./synergy.5d8f0376.js";import{S as P}from"./switchBar.3a8341ea.js";import{N as Y}from"./index.ea73f821.js";const J=[{title:"\u5E8F\u53F7",align:"left",width:80,minWidth:80,colKey:"rowIndex"},{title:"\u5355\u636E\u7F16\u53F7",minWidth:180,colKey:"code"},{title:"\u5355\u636E\u6807\u9898",minWidth:200,colKey:"title"},{title:"\u5355\u636E\u7C7B\u522B",minWidth:180,colKey:"type"},{title:"\u7533\u8BF7\u4EBA",minWidth:180,colKey:"applicat"},{title:"\u7533\u8BF7\u65F6\u95F4",minWidth:300,colKey:"applicationTime"},{title:"\u7B49\u5F85\u65F6\u957F",minWidth:180,colKey:"waitingTime"},{title:"\u6D41\u7A0B\u72B6\u6001",colKey:"status",width:120,minWidth:"120px",cell:(u,{row:m})=>{const c={1:{label:"\u7533\u8BF7\u4E2D"},2:{label:"\u5DF2\u5B8C\u6210"},3:{label:"\u5DF2\u5173\u95ED"}};return u("span",{class:`status-dot status-dot-${m.status}`},c[m.status].label)}},{align:"left",fixed:"right",width:65,minWidth:"65px",colKey:"op",title:"\u64CD\u4F5C"}],Q=[{title:"\u5E8F\u53F7",align:"left",width:80,minWidth:80,colKey:"rowIndex"},{title:"\u5355\u636E\u7F16\u53F7",minWidth:180,colKey:"code"},{title:"\u5355\u636E\u6807\u9898",minWidth:180,colKey:"title"},{title:"\u5355\u636E\u7C7B\u522B",minWidth:180,colKey:"type"},{title:"\u7533\u8BF7\u4EBA",minWidth:180,colKey:"applicat"},{title:"\u7533\u8BF7\u65F6\u95F4",minWidth:300,colKey:"applicationTime"},{title:"\u5B8C\u6210\u65F6\u95F4",minWidth:180,colKey:"finishTime"},{title:"\u6D41\u7A0B\u72B6\u6001",colKey:"status",width:120,minWidth:"120px",cell:(u,{row:m})=>{const c={1:{label:"\u7533\u8BF7\u4E2D"},2:{label:"\u5DF2\u5B8C\u6210"},3:{label:"\u5DF2\u5173\u95ED"}};return u("span",{class:`status-dot status-dot-${m.status}`},c[m.status].label)}},{align:"left",fixed:"right",width:65,minWidth:"65px",colKey:"op",title:"\u64CD\u4F5C"}],X={class:"baseList"},Z={class:"tableBoxs"},ee={key:0},te={key:1},ae={key:2},le={class:"operateCon"},ne=["onClick"],ue=["onClick"],oe="index",se=A({__name:"TableList",props:{listData:{type:Object,default:()=>[]},total:{type:Number,default:0},pagination:{type:Object,default:()=>({})},dataLoading:{type:Boolean,default:!1}},emits:["handleOpen","getCurrent"],setup(u,{emit:m}){const c=L(),D=I(),F=m,t=o=>{D.setEnterBaseData({}),o.type===1?c.push({path:"/active/applyDetails",query:{assigneeId:o.assigneeId,code:o.code,isHandle:o.isHandle,taskId:o.id,path:"backlogAfter"}}):o.type===2?console.log(o):c.push({path:"/active/checkDetails",query:{assigneeId:o.assigneeId,code:o.code,isHandle:o.isHandle,taskId:o.id,path:"backlogAfter"}})},g=o=>{const d=new Date(o),e=d.getFullYear(),l=d.getMonth()+1,a=d.getDate(),p=d.getHours(),S=d.getMinutes(),C=d.getSeconds();return k(e,l,a,p,S,C)},k=(o,d,e,l,a,p)=>{const S=new Date,C=new Date(o,d-1,e,l,a,p);let B=S.getTime()-C.getTime();B<=0&&(B=0);const T=parseInt(B/1e3);e=Math.floor(T/(60*60*24));const _=Math.floor((T-e*24*60*60)/3600),n=Math.floor((T-e*24*60*60-_*3600)/60),v=Math.floor(B/1e3%60,10);let w="";return e>0?w=`${e}\u5929${_}\u5C0F\u65F6${n}\u5206\u949F${v}\u79D2`:_>0?w=`${_}\u5C0F\u65F6${n}\u5206\u949F${v}\u79D2`:n>0?w=`${n}\u5206\u949F${v}\u79D2`:w=`${v}\u79D2`,w},E=o=>{F("getCurrent",o)};return(o,d)=>{const e=f("t-table"),l=f("t-pagination");return r(),h("div",X,[$("div",Z,[s(e,{data:u.listData,columns:u.pagination.isHandle===0?x(J):x(Q),"row-key":oe,"vertical-align":"middle",hover:!0,loading:u.dataLoading,"table-layout":"fixed","table-content-width":"100%"},{rowIndex:i(({rowIndex:a})=>[z(V(a+1),1)]),type:i(({row:a})=>[a.type===1?(r(),h("span",ee,"\u9000\u4F4F")):a.type===2?(r(),h("span",te,"\u8BF7\u5047")):(r(),h("span",ae,"\u5165\u4F4F"))]),waitingTime:i(({row:a})=>[z(V(g(a.applicationTime)),1)]),finishTime:i(({row:a})=>[z(V(a.finishTime?a.finishTime:"--"),1)]),op:i(({row:a})=>[$("div",le,[u.pagination.isHandle===0?(r(),h("a",{key:0,class:"font-bt",onClick:p=>t(a)},"\u5904\u7406",8,ne)):(r(),h("a",{key:1,class:"font-bt",onClick:p=>t(a)},"\u67E5\u770B",8,ue))])]),empty:i(()=>[s(Y)]),_:1},8,["data","columns","loading"]),y(" \u5206\u9875 "),u.total>10?(r(),K(l,{key:0,modelValue:u.pagination.pageNum,"onUpdate:modelValue":d[0]||(d[0]=a=>u.pagination.pageNum=a),pageSize:u.pagination.pageSize,"onUpdate:pageSize":d[1]||(d[1]=a=>u.pagination.pageSize=a),total:u.total,onChange:E},null,8,["modelValue","pageSize","total"])):y("v-if",!0),y(" end ")])])}}});var ie=W(se,[["__file","D:/project/2023/project-zzyl-v2.1/project-zzyl-admin-vue3-java/src/pages/synergy/backlog/components/TableList.vue"]]);const de={class:"formBox"},ce=A({__name:"SearchForm",props:{searchData:{type:Object,default:()=>({})}},emits:["handleSearch","handleReset","handleClear"],setup(u,{emit:m}){const c=m,D=b(null),F=b([]),t=b([]);H(()=>{t.value=[...O],t.value.splice(0,1)});const g=()=>{F.value=[],D.value.reset(),c("handleReset")},k=()=>{c("handleSearch",F.value)},E=(d,e)=>{e.trigger==="clear"&&c("handleClear",e.trigger)},o=d=>{c("handleClear",d)};return(d,e)=>{const l=f("t-input"),a=f("t-form-item"),p=f("t-col"),S=f("t-date-range-picker"),C=f("t-option"),B=f("t-select"),T=f("t-row"),_=f("t-form");return r(),h("div",de,[s(_,{ref_key:"form",ref:D,model:u.searchData,"label-width":98},{default:i(()=>[s(T,null,{default:i(()=>[s(p,null,{default:i(()=>[s(a,{label:"\u5355\u636E\u7F16\u53F7\uFF1A",name:"code"},{default:i(()=>[s(l,{modelValue:u.searchData.code,"onUpdate:modelValue":e[0]||(e[0]=n=>u.searchData.code=n),class:"form-item-content",type:"search",placeholder:"\u8BF7\u8F93\u5165",clearable:"",onClear:e[1]||(e[1]=n=>o("code"))},null,8,["modelValue"])]),_:1})]),_:1}),s(p,null,{default:i(()=>[s(a,{label:"\u7533\u8BF7\u4EBA\uFF1A",name:"applicat"},{default:i(()=>[s(l,{modelValue:u.searchData.applicat,"onUpdate:modelValue":e[2]||(e[2]=n=>u.searchData.applicat=n),class:"form-item-content",type:"search",placeholder:"\u8BF7\u8F93\u5165",clearable:"",onClear:e[3]||(e[3]=n=>o("applicat"))},null,8,["modelValue"])]),_:1})]),_:1}),s(p,null,{default:i(()=>[s(a,{label:"\u7533\u8BF7\u65F6\u95F4\uFF1A",name:"timeData"},{default:i(()=>[s(S,{modelValue:F.value,"onUpdate:modelValue":e[4]||(e[4]=n=>F.value=n),placeholder:["\u5F00\u59CB\u65E5\u671F","\u7ED3\u675F\u65E5\u671F"],clearable:"",onChange:E},null,8,["modelValue"])]),_:1})]),_:1}),s(p,null,{default:i(()=>[s(a,{label:"\u5355\u636E\u7C7B\u522B\uFF1A",name:"type"},{default:i(()=>[s(B,{modelValue:u.searchData.type,"onUpdate:modelValue":e[5]||(e[5]=n=>u.searchData.type=n),clearable:"",filterable:"",placeholder:"\u8BF7\u9009\u62E9",onClear:e[6]||(e[6]=n=>o("type"))},{default:i(()=>[(r(!0),h(j,null,N(x(R),(n,v)=>(r(),K(C,{key:v,value:n.id,label:n.value,title:""},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),s(p,null,{default:i(()=>[s(a,{label:"\u6D41\u7A0B\u72B6\u6001\uFF1A",name:"status"},{default:i(()=>[s(B,{modelValue:u.searchData.status,"onUpdate:modelValue":e[7]||(e[7]=n=>u.searchData.status=n),clearable:"",filterable:"",placeholder:"\u8BF7\u9009\u62E9",onClear:e[8]||(e[8]=n=>o("status"))},{default:i(()=>[(r(!0),h(j,null,N(t.value,(n,v)=>(r(),K(C,{key:v,value:n.id,label:n.value,title:""},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),y(" \u6309\u94AE\u533A\u57DF "),s(p,{class:"searchBtn"},{default:i(()=>[$("button",{type:"button",class:"bt-grey wt-60",onClick:e[9]||(e[9]=n=>g())}," \u91CD\u7F6E "),$("button",{type:"button",class:"bt wt-60",onClick:e[10]||(e[10]=n=>k())}," \u641C\u7D22 ")]),_:1})]),_:1})]),_:1},8,["model"])])}}});var re=W(ce,[["__file","D:/project/2023/project-zzyl-v2.1/project-zzyl-admin-vue3-java/src/pages/synergy/backlog/components/SearchForm.vue"]]);const me={class:"min-h subscribe bg-wt"},pe={class:"marg-main newBox"},ge=A({__name:"index",setup(u){const m=b([]),c=b(!1),D=b(0),F=b(null),t=b({pageSize:10,pageNum:1,reqType:0,isHandle:0});H(()=>{g()});const g=async()=>{c.value=!1;try{const l=await G(t.value);m.value=l.data.records,D.value=Number(l.data.total)}finally{c.value=!1}},k=l=>{t.value.pageNum=1,l.length>0&&(t.value.startTime=U(l[0]),t.value.endTime=M(l[1])),g()},E=()=>{t.value={pageSize:10,pageNum:1,reqType:0,isHandle:0},F.value.currentId=0,g()},o=l=>{t.value.pageNum=l.current,t.value.pageSize=l.pageSize,g()},d=l=>{t.value.pageNum=1,t.value.isHandle=l,g()},e=l=>{l==="code"?delete t.value.code:l==="applicat"?delete t.value.applicat:l==="type"?delete t.value.type:l==="status"?delete t.value.status:(delete t.value.startTime,delete t.value.endTime),t.value={...t.value,isHandle:t.value.isHandle===1?1:0},g()};return(l,a)=>(r(),h("div",me,[y(" \u7B5B\u9009\u533A\u57DF "),s(re,{"search-data":t.value,onHandleClear:e,onHandleSearch:k,onHandleReset:E},null,8,["search-data"]),y(" end "),y(" tab\u5BFC\u822A "),$("div",pe,[s(P,{ref_key:"tabBar",ref:F,data:x(q),onChangeId:d},null,8,["data"])]),y(" \u8868\u683C "),s(ie,{"list-data":m.value,pagination:t.value,total:D.value,onGetCurrent:o},null,8,["list-data","pagination","total"]),y(" end ")]))}});var De=W(ge,[["__file","D:/project/2023/project-zzyl-v2.1/project-zzyl-admin-vue3-java/src/pages/synergy/backlog/index.vue"]]);export{De as default};
