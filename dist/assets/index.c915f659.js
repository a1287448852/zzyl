import{d as A,u as q,a as U,r as l,b as L,c as $,e as i,o as d,f as y,w as s,g as C,h as g,i as u,F as N,n as T,j as P,k as M,M as w,l as G,_ as E,p as x,m as D,q as n,s as H}from"./index.c5b6faf2.js";const J=e=>(x("data-v-00a39d7a"),e=e(),D(),e),K={key:1,class:"bt",type:"submit"},O=J(()=>n("div",{class:"gentleReminder"}," \u4EC5\u7528\u4E8EIT\u57F9\u8BAD\u6559\u5B66\u4F7F\u7528\uFF0C\u4E3A\u4FDD\u969C\u60A8\u7684\u4E2A\u4EBA\u4FE1\u606F\u5B89\u5168\uFF0C\u8BF7\u52FF\u5411 \u5E73\u53F0\u5F55\u5165\u4EFB\u4F55\u4E2A\u4EBA\u654F\u611F\u4FE1\u606F(\u5982\u624B\u673A\u53F7\u3001\u8EAB\u4EFD\u8BC1\u53F7\u7B49) ! ",-1)),Q=A({__name:"Login",setup(e){const _=q(),F=U(),p=l(!1),o=l({username:"admin@qq.com",password:"888itcast.CN764%..."}),k={username:[{required:!0,message:"\u8D26\u53F7\u4E3A\u7A7A\uFF0C\u8BF7\u8F93\u5165\u8D26\u53F7",type:"error"}],password:[{required:!0,message:"\u5BC6\u7801\u4E3A\u7A7A\uFF0C\u8BF7\u8F93\u5165\u5BC6\u7801",type:"error"}]},B=l(2),z=l(),R=l(!1),I=L(),S=$(),j=async({validateResult:m})=>{m===!0&&(p.value=!0,await P(o.value).then(async a=>{a.code===200&&(await _.login(a.data.userToken),_.setUserInfo(a.data),p.value=!1,await M().then(async t=>{if(t.code===200){t.data.length||w.error("\u672A\u914D\u7F6E\u83DC\u5355\u6743\u9650\uFF0C\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458"),await F.setRouters(t.data);const r=S.query.redirect,c=r?decodeURIComponent(r):t.data&&t.data.length&&t.data[0].path;I.push(c),await G().then(async v=>{await _.setRouteButton(v.data)}),F.isDynamic=!0,w.success("\u767B\u5F55\u6210\u529F")}}))}),setTimeout(()=>{p.value=!1},1e3))},h=m=>m.replace(/\s/g,"");return(m,a)=>{const t=i("t-icon"),r=i("t-input"),c=i("t-form-item"),v=i("t-loading"),V=i("t-form");return d(),y(V,{ref_key:"form",ref:z,class:T(["item-container",`login-${B.value}`]),data:o.value,rules:k,"label-width":"0",onSubmit:j},{default:s(()=>[C(" \u5BC6\u7801\u767B\u5F55 "),B.value==2?(d(),g(N,{key:0},[u(c,{name:"username"},{default:s(()=>[u(r,{modelValue:o.value.username,"onUpdate:modelValue":a[0]||(a[0]=f=>o.value.username=f),size:"large",placeholder:"\u8D26\u53F7",autocomplete:"both",format:h,clearable:""},{"prefix-icon":s(()=>[u(t,{name:"user"})]),_:1},8,["modelValue"])]),_:1}),u(c,{name:"password"},{default:s(()=>[u(r,{modelValue:o.value.password,"onUpdate:modelValue":a[1]||(a[1]=f=>o.value.password=f),size:"large",type:R.value?"text":"password",clearable:"",placeholder:"\u5BC6\u7801",format:h,onkeyup:"this.value=this.value.replace(/[^\\w_]/g,'');",autocomplete:"both"},{"prefix-icon":s(()=>[u(t,{name:"lock-on"})]),_:1},8,["modelValue","type"])]),_:1})],64)):C("v-if",!0),u(c,{class:"btn-container"},{default:s(()=>[p.value?(d(),y(v,{key:0,indicator:"",class:"bt load"})):(d(),g("button",K,"\u767B\u5F55"))]),_:1}),O]),_:1},8,["class","data"])}}});var W=E(Q,[["__scopeId","data-v-00a39d7a"],["__file","D:/project/2023/project-zzyl-v2.1/project-zzyl-admin-vue3-java/src/pages/login/components/Login.vue"]]);const b=e=>(x("data-v-247e7dd8"),e=e(),D(),e),X={class:"login-wrapper"},Y={class:"login-container"},Z=b(()=>n("div",{class:"title-container"},[n("h1",{class:"title"},[n("img",{src:H,alt:"",class:"logo"})])],-1)),ee=b(()=>n("div",{class:"companyFooter"}," Copyright @ 2019-2020 Tencent. All Rights Reserved ",-1)),te=A({__name:"index",setup(e){return(_,F)=>(d(),g("div",X,[n("div",Y,[Z,u(W)]),ee]))}});var ue=E(te,[["__scopeId","data-v-247e7dd8"],["__file","D:/project/2023/project-zzyl-v2.1/project-zzyl-admin-vue3-java/src/pages/login/index.vue"]]);export{ue as default};
