import{d as M,r as i,e as h,o as z,h as R,g as D,i as a,w as F,F as K,_ as q,M as G,u as me,C as Y,y as X,E as Fe,f as W,B as Q,z as v,A as V,K as fe,J as ve,x as ae,q as e,L as oe,N as ne,S as Be,p as _e,m as Ae,O as S,c as ye,b as Ie,D as Ve,P as se,Q as re}from"./index.c5b6faf2.js";import{f as ue,g as H,h as ie,a as $e,i as ke,e as Ne,j as de,k as ce}from"./date.a9e2d8fb.js";import{g as we}from"./liveIn.c94c5d2b.js";import{c as Pe,a as je}from"./checkin.2c0c2a4d.js";import{a as Ue}from"./oldMan.343a3c02.js";import{d as xe,r as te}from"./commonData.8892e613.js";import{g as ze}from"./serve.04eebc9f.js";const Te=M({__name:"upload",props:{formData:{type:Object,default:()=>({})},urls:{type:Object,default:()=>({})}},emits:["getUpdateImg"],setup(t,{expose:P,emit:_}){const B=_,f=i(!0),g=i([]),E=i([]),k=i([]),m=i({size:60,unit:"MB",message:"\u56FE\u7247\u5927\u5C0F\u8D85\u8FC760m\uFF0C\u8BF7\u91CD\u65B0\u4E0A\u4F20"}),$={oneInchPhoto:[{required:!0,message:"\u4E00\u5BF8\u7167\u7247\u4E3A\u7A7A\uFF0C\u8BF7\u4E0A\u4F20\u4E00\u5BF8\u7167\u7247",type:"error",trigger:"change"}],idCardPortraitImg:[{required:!0,message:"\u8EAB\u4EFD\u8BC1\u4EBA\u50CF\u9762\u4E3A\u7A7A\uFF0C\u8BF7\u4E0A\u4F20\u8EAB\u4EFD\u8BC1\u4EBA\u50CF\u9762",type:"error",trigger:"change"}],idCardNationalEmblemImg:[{required:!0,message:"\u8EAB\u4EFD\u8BC1\u56FD\u5FBD\u9762\u4E3A\u7A7A\uFF0C\u8BF7\u4E0A\u4F20\u8EAB\u4EFD\u8BC1\u56FD\u5FBD\u9762",type:"error",trigger:"change"}]},b=r=>{r===1?g.value=[]:r===2?(E.value=[],formData.value.url2=""):(k.value=[],formData.value.url3=""),B("getUpdateImg","",r)},A=r=>{G.error("\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25")},y=(r,u)=>{if(B("getUpdateImg",r.response.data,u),u===1){const o=r.response.data;g.value[0].response.url=o,g.value[0].url=o}else if(u===2){const o=r.response.data;E.value[0].response.url=o,E.value[0].url=o}else{const o=r.response.data;k.value[0].response.url=o,k.value[0].url=o}},j=r=>r.size>2*1024*1024?(G.error("\u56FE\u7247\u5927\u5C0F\u8D85\u8FC72M\uFF0C\u8BF7\u91CD\u65B0\u4E0A\u4F20"),!1):!0;return P({rules:$}),(r,u)=>{const o=h("t-upload"),c=h("t-form-item");return z(),R(K,null,[D(" \u57FA\u672C\u4FE1\u606F "),a(c,{label:"\u4E00\u5BF8\u7167\u7247\uFF1A",name:"oneInchPhoto"},{default:F(()=>[a(o,{ref:"uploadRef",modelValue:g.value,"onUpdate:modelValue":u[0]||(u[0]=l=>g.value=l),action:"api/common/upload",autoUpload:f.value,theme:"image","size-limit":m.value,tips:"\u56FE\u7247\u5927\u5C0F\u4E0D\u8D85\u8FC72M,\u4EC5\u652F\u6301\u4E0A\u4F20PNG JPG JPEG\u7C7B\u578B\u56FE\u7247",accept:".jpg,.jpeg,.png","before-upload":j,onRemove:u[1]||(u[1]=l=>b(1)),onFail:A,onSuccess:u[2]||(u[2]=l=>y(l,1))},null,8,["modelValue","autoUpload","size-limit"])]),_:1}),a(c,{label:"\u8EAB\u4EFD\u8BC1\u4EBA\u50CF\u9762\uFF1A",name:"idCardPortraitImg"},{default:F(()=>[a(o,{ref:"uploadRef",modelValue:E.value,"onUpdate:modelValue":u[3]||(u[3]=l=>E.value=l),action:"api/common/upload",autoUpload:f.value,theme:"image","size-limit":m.value,tips:"\u56FE\u7247\u5927\u5C0F\u4E0D\u8D85\u8FC72M,\u4EC5\u652F\u6301\u4E0A\u4F20PNG JPG JPEG\u7C7B\u578B\u56FE\u7247",accept:".jpg,.jpeg,.png","before-upload":j,onRemove:u[4]||(u[4]=l=>b(2)),onFail:A,onSuccess:u[5]||(u[5]=l=>y(l,2))},null,8,["modelValue","autoUpload","size-limit"])]),_:1}),a(c,{label:"\u8EAB\u4EFD\u8BC1\u56FD\u5FBD\u9762\uFF1A",name:"idCardNationalEmblemImg"},{default:F(()=>[a(o,{ref:"uploadRef",modelValue:k.value,"onUpdate:modelValue":u[6]||(u[6]=l=>k.value=l),action:"api/common/upload",autoUpload:f.value,theme:"image","size-limit":m.value,tips:"\u56FE\u7247\u5927\u5C0F\u4E0D\u8D85\u8FC72M,\u4EC5\u652F\u6301\u4E0A\u4F20PNG JPG JPEG\u7C7B\u578B\u56FE\u7247",accept:".jpg,.jpeg,.png","before-upload":j,onRemove:u[7]||(u[7]=l=>b(3)),onFail:A,onSuccess:u[8]||(u[8]=l=>y(l,3))},null,8,["modelValue","autoUpload","size-limit"])]),_:1}),D(" end ")],64)}}});var Se=q(Te,[["__file","D:/project/2023/project-zzyl-v2.1/project-zzyl-admin-vue3-java/src/pages/enterQuitV2/enter/components/upload.vue"]]);const Re=M({__name:"ApplyForm",props:{formData:{type:Object,default:()=>({})},baseData:{type:Object,default:()=>({})},storageData:{type:Object,default:()=>({})},infoActive:{type:Number,default:0},isSave:{type:Boolean,default:!1}},emits:["getUpdateImg","handleCardNo","handlePhone"],setup(t,{expose:P,emit:_}){const B=t,f=_,g=i(!0),E=i(0),k=i(null),m=i(null),$=me(),A={name:[{required:!0,message:"\u8001\u4EBA\u59D3\u540D\u4E3A\u7A7A\uFF0C\u8BF7\u8F93\u5165\u8001\u4EBA\u59D3\u540D",type:"error",trigger:"blur"}],idCardNo:[{required:!0,message:"\u8001\u4EBA\u8EAB\u4EFD\u8BC1\u53F7\u4E3A\u7A7A\uFF0C\u8BF7\u8F93\u5165\u8001\u4EBA\u8EAB\u4EFD\u8BC1\u53F7",trigger:"blur"},{validator:fe,message:"\u8EAB\u4EFD\u8BC1\u683C\u5F0F\u9519\u8BEF\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165",type:"error",trigger:"blur"},{validator:async c=>{if(console.log(c),c!==void 0&&c!==""){const l=await Ue({idCard:c});if(l.code===200)return!(l.data&&l.data!==void 0&&c===l.data.idCardNo)}else return!1},message:"\u8BE5\u8001\u4EBA\u5DF2\u5165\u4F4F\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165",type:"error",trigger:"blur"}],phone:[{required:!0,message:"\u8054\u7CFB\u65B9\u5F0F\u4E3A\u7A7A\uFF0C\u8BF7\u8F93\u5165\u8054\u7CFB\u65B9\u5F0F",type:"error",trigger:"blur"},{validator:ve,message:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165",type:"error",trigger:"blur"}],address:[{required:!0,message:"\u5BB6\u5EAD\u4F4F\u5740\u4E3A\u7A7A\uFF0C\u8BF7\u8F93\u5165\u5BB6\u5EAD\u4F4F\u5740",type:"error",trigger:"blur"}]},y=i({}),j=i({});Y(B,c=>{if(c.isSave){const l=$.$state.enterBaseData;l.otherApplyInfo!==void 0&&(formData.value=$.$state.enterBaseData.otherApplyInfo),l.memberElderDtos!==void 0&&l.memberElderDtos.length>0&&(familyUserData.value=l.memberElderDtos)}c.infoActive>0&&(E.value=c.infoActive,k.value.currentId=E.value)}),X(()=>{y.value={...A,...m.value.rules},console.log(y)});const r=()=>{f("handleCardNo")},u=c=>{f("handlePhone",c)},o=(c,l)=>{f("getUpdateImg",c,l)};return P({rules:y}),(c,l)=>{const s=h("t-input"),C=h("t-form-item"),w=h("t-radio"),T=h("t-radio-group"),U=h("t-textarea"),L=h("t-card");return z(),R(K,null,[D(" \u57FA\u672C\u4FE1\u606F "),a(L,{title:"\u57FA\u672C\u4FE1\u606F"},{default:F(()=>[a(C,{label:"\u8001\u4EBA\u59D3\u540D\uFF1A",name:"name"},{default:F(()=>[a(s,{modelValue:t.formData.name,"onUpdate:modelValue":l[0]||(l[0]=N=>t.formData.name=N),placeholder:"\u8BF7\u8F93\u5165",class:"wt-300",clearable:"","show-limit-number":"",maxlength:10},null,8,["modelValue"])]),_:1}),a(C,{label:"\u8001\u4EBA\u8EAB\u4EFD\u8BC1\u53F7\uFF1A",name:"idCardNo"},{default:F(()=>[a(s,{modelValue:t.formData.idCardNo,"onUpdate:modelValue":l[1]||(l[1]=N=>t.formData.idCardNo=N),placeholder:"\u8BF7\u8F93\u5165",class:"wt-300","show-limit-number":"",maxlength:18,clearable:"",onBlur:r},null,8,["modelValue"])]),_:1}),a(C,{label:"\u51FA\u751F\u65E5\u671F\uFF1A"},{default:F(()=>[a(s,{modelValue:t.formData.birthday,"onUpdate:modelValue":l[2]||(l[2]=N=>t.formData.birthday=N),placeholder:"\u51FA\u751F\u65E5\u671F",class:"wt-300",disabled:g.value},null,8,["modelValue","disabled"])]),_:1}),a(C,{label:"\u5E74\u9F84\uFF1A"},{default:F(()=>[a(s,{modelValue:t.formData.age,"onUpdate:modelValue":l[3]||(l[3]=N=>t.formData.age=N),placeholder:"\u5E74\u9F84",class:"wt-300",disabled:g.value},null,8,["modelValue","disabled"])]),_:1}),a(C,{label:"\u6027\u522B\uFF1A",name:"sex"},{default:F(()=>[a(T,{modelValue:t.formData.sex,"onUpdate:modelValue":l[4]||(l[4]=N=>t.formData.sex=N)},{default:F(()=>[(z(!0),R(K,null,Fe(V(xe),(N,d)=>(z(),W(w,{key:d,value:N.id,disabled:g.value},{default:F(()=>[Q(v(N.value),1)]),_:2},1032,["value","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(C,{label:"\u8054\u7CFB\u65B9\u5F0F\uFF1A",name:"phone"},{default:F(()=>[a(s,{modelValue:t.formData.phone,"onUpdate:modelValue":l[5]||(l[5]=N=>t.formData.phone=N),placeholder:"\u8BF7\u8F93\u5165",class:"wt-300",clearable:"","show-limit-number":"",maxlength:11,onChange:u},null,8,["modelValue"])]),_:1}),a(C,{label:"\u5BB6\u5EAD\u4F4F\u5740\uFF1A",name:"address"},{default:F(()=>[a(U,{modelValue:t.formData.address,"onUpdate:modelValue":l[6]||(l[6]=N=>t.formData.address=N),placeholder:"\u8BF7\u8F93\u5165",class:"t-textarea wt-300",name:"description",maxlength:100,clearable:"","show-limit-number":""},null,8,["modelValue"])]),_:1}),a(Se,{ref_key:"uploadImg",ref:m,urls:j.value,formData:t.formData,onGetUpdateImg:o},null,8,["urls","formData"]),D(" end ")]),_:1}),D(" end ")],2112)}}});var Le=q(Re,[["__file","D:/project/2023/project-zzyl-v2.1/project-zzyl-admin-vue3-java/src/pages/enterQuitV2/enter/components/ApplyForm.vue"]]);const Oe={class:"addInput"},Me=M({__name:"family",props:{formData:{type:Object,default:()=>({})},baseData:{type:Object,default:()=>({})},storageData:{type:Object,default:()=>({})},infoActive:{type:Number,default:0},isSave:{type:Boolean,default:!1}},emits:["getInfoActive","setFamily","setIsSave"],setup(t,{expose:P,emit:_}){const B=t,f=_;i();const g=i(),E=ae(()=>[{title:"\u5BB6\u5C5E\u59D3\u540D",colKey:"name",minWidth:200,edit:{component:ne,props:{clearable:!0,maxlength:10},validateTrigger:"change",abortEditOnEvent:["onEnter"],onEdited:c=>{m.value.splice(c.rowIndex,1,c.newRowData),G.success("Success")},rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"}],defaultEditable:!0}},{title:"\u5BB6\u5C5E\u8054\u7CFB\u65B9\u5F0F",colKey:"phone",minWidth:200,edit:{component:ne,props:{clearable:!0,maxlength:11},abortEditOnEvent:["blur"],rules:[{validator:c=>{const l=/^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\d{8}$/;if(c==="")G.error("\u5BB6\u5C5E\u4FE1\u606F\u4E0D\u5B8C\u6574\uFF0C\u8BF7\u8F93\u5165\u5BB6\u5C5E\u4FE1\u606F"),f("setFamily",m.value,!1);else{if(l.test(c))return!0;G.error("\u5BB6\u5C5E\u8054\u7CFB\u65B9\u5F0F\u9519\u8BEF\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165"),f("setFamily",m.value,!1)}}}],defaultEditable:!0}},{title:"\u4E0E\u8001\u4EBA\u5173\u7CFB",colKey:"refId",minWidth:200,props:{clearable:!1},cell:(c,{row:l})=>{var s;return(s=te.find(C=>C.value===l.refId))==null?void 0:s.label},edit:{component:Be,props:{clearable:!0,options:te},rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"}],showEditIcon:!1}},{align:"left",fixed:"right",width:100,minWidth:100,colKey:"op",title:"\u64CD\u4F5C"}]),m=i((()=>[{key:"0",name:"",phone:"",refId:"",kinship:""}])()),$=i([]),b=i(!1),A={};Y(B,c=>{}),X(()=>{const c=[];console.log(B.baseData.retreat),B.baseData.retreat!==void 0&&(B.baseData.retreat.memberElderDtos.forEach(l=>{const s={key:"0",id:l.id,name:l.name,phone:l.phone,refId:l.refId,kinship:l.kinship};c.push(s)}),m.value=c),j()});const y=c=>{var N;const{row:l,col:s,value:C,rowIndex:w}=c;s.title==="\u4E0E\u8001\u4EBA\u5173\u7CFB"&&te.forEach(d=>{d.value===C&&(l.kinship=d.label,l.refId=d.value)});const T=((N=A[l.key])==null?void 0:N.editedRow)||l;s.title==="\u5BB6\u5C5E\u59D3\u540D"&&C===""?T.name="":s.title==="\u5BB6\u5C5E\u8054\u7CFB\u65B9\u5F0F"&&C===""?T.phone="":s.title==="\u4E0E\u8001\u4EBA\u5173\u7CFB"&&C===void 0&&(T.refId="",T.kinship="");const U={...T,[s.colKey]:C};A[l.key]={...c,editedRow:U};const L=[...m.value];L[w]=U,m.value=L},j=()=>{$.value=[],m.value.forEach((c,l)=>{$.value.push(String(l))})},r=(c,l)=>{m.value.splice(l,1),b.value=!1},u=()=>{const c={key:m.value.length>0?String(m.value.length):"0",name:"",phone:"",refId:"",kinship:""};m.value.push(c),j()},o=()=>{};return P({onRowValidate:o,tableRef:g,familyUserData:m}),(c,l)=>{const s=h("t-table"),C=h("t-card");return z(),R(K,null,[D(" \u5BB6\u5C5E\u4FE1\u606F "),a(C,{title:"\u5BB6\u5C5E\u4FE1\u606F",class:"familyBox"},{default:F(()=>[a(s,{ref_key:"tableRef",ref:g,"row-key":"key",columns:E.value,data:m.value,"editable-row-keys":$.value,"table-layout":"auto",onRowEdit:y,onRowValidate:o},{op:F(({row:w,rowIndex:T})=>[e("div",Oe,[m.value.length>1?(z(),W(V(oe),{key:0,name:"minus-rectangle",onClick:U=>r(w,T)},null,8,["onClick"])):D("v-if",!0),T===0&&!b.value?(z(),W(V(oe),{key:1,name:"add-rectangle",onClick:u})):D("v-if",!0)])]),_:1},8,["columns","data","editable-row-keys"])]),_:1})],2112)}}});var qe=q(Me,[["__file","D:/project/2023/project-zzyl-v2.1/project-zzyl-admin-vue3-java/src/pages/enterQuitV2/enter/components/family.vue"]]);const O=t=>(_e("data-v-063b08c8"),t=t(),Ae(),t),Qe=O(()=>e("span",{class:"method"},"+",-1)),Ge=O(()=>e("span",{class:"unit"},"\u5143",-1)),Ke=O(()=>e("span",{class:"method"},"+",-1)),He=O(()=>e("span",{class:"unit"},"\u5143/\u6708",-1)),Je=O(()=>e("span",{class:"method"},"+",-1)),We=O(()=>e("span",{class:"unit"},"\u5143/\u6708",-1)),Ye=O(()=>e("span",{class:"method"},"+",-1)),Xe=O(()=>e("span",{class:"unit"},"\u5143/\u6708",-1)),Ze=O(()=>e("span",{class:"method2"},"- ",-1)),eu=O(()=>e("span",{class:"unit"},"\u5143/\u6708",-1)),uu=O(()=>e("span",{class:"method2"}," - ",-1)),tu=O(()=>e("span",{class:"unit"},"\u5143/\u6708",-1)),au=M({__name:"ConfigurationForm",props:{formData:{type:Object,default:()=>({})},baseData:{type:Object,default:()=>({})},floorData:{type:Array,default:()=>[]}},emits:["textBlurPrice","getNewCostTime","handleNursing","setBedId"],setup(t,{expose:P,emit:_}){const B=t,f=_,g=i(""),E=i([]),k={checkInTime:[{required:!0,message:"\u5165\u4F4F\u671F\u9650\u4E3A\u7A7A\uFF0C\u8BF7\u9009\u62E9\u5165\u4F4F\u671F\u9650",type:"error",trigger:"change"}],nursingLevelId:[{required:!0,message:"\u62A4\u7406\u7B49\u7EA7\u4E3A\u7A7A\uFF0C\u8BF7\u9009\u62E9\u62A4\u7406\u7B49\u7EA7",type:"error",trigger:"change"}],bedId:[{required:!0,message:"\u5165\u4F4F\u5E8A\u4F4D\u4E3A\u7A7A\uFF0C\u8BF7\u9009\u62E9\u5165\u4F4F\u5E8A\u4F4D",type:"error",trigger:"change"}],costTime:[{required:!0,message:"\u8D39\u7528\u671F\u9650\u4E3A\u7A7A\uFF0C\u8BF7\u9009\u62E9\u8D39\u7528\u671F\u9650",type:"error",trigger:"change"}],nursingCost:[{required:!0,message:"\u62A4\u7406\u8D39\u7528\u4E3A\u7A7A\uFF0C\u8BF7\u8F93\u5165\u62A4\u7406\u8D39\u7528",type:"error",trigger:"blur"},{validator:r=>r>=.01,message:"\u62A4\u7406\u8D39\u7528\u4E3A\u7A7A\uFF0C\u8BF7\u8F93\u5165\u62A4\u7406\u8D39\u7528",type:"error",trigger:"change"},{validator:r=>(console.log(r,B.formData.fee*1.1),!(r<B.formData.fee*.9||r>B.formData.fee*1.1)),message:"\u8BE5\u8D39\u7528\u5DF2\u8D85\u51FA/\u4F4E\u4E8E\u539F\u8D39\u752810%\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165",type:"error",trigger:"change"}],bedCost:[{required:!0,message:"\u5E8A\u4F4D\u8D39\u7528\u4E3A\u7A7A\uFF0C\u8BF7\u8F93\u5165\u5E8A\u4F4D\u8D39\u7528",type:"error",trigger:"blur"},{validator:r=>r>=.01,message:"\u5E8A\u4F4D\u8D39\u7528\u4E3A\u7A7A\uFF0C\u8BF7\u8F93\u5165\u5E8A\u4F4D\u8D39\u7528",type:"error",trigger:"change"},{validator:r=>!(r<B.formData.price*.9||r>B.formData.price*1.1),message:"\u8BE5\u8D39\u7528\u5DF2\u8D85\u51FA/\u4F4E\u4E8E\u539F\u8D39\u752810%\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165",type:"error",trigger:"change"}]},m=ae(()=>({disableTime:()=>pickDate.value===ue().format("YYYY-MM-DD")?{hour:[0,1,2,3,4,5,6]}:{}}));X(()=>{$()});const $=async()=>{const r=await ze();r.code===200&&(E.value=r.data)},b=(r,u)=>{f("textBlurPrice",r,u)},A=(r,u)=>{f("handleNursing",u.selectedOptions[0],E.value)},y=r=>{f("getNewCostTime",r)},j=(r,u)=>{console.log(r,u.node.data),g.value=r,f("setBedId",r.substring(1),u.node.data)};return P({rules:k}),(r,u)=>{const o=h("t-icon"),c=h("t-popup"),l=h("t-date-range-picker"),s=h("t-form-item"),C=h("t-option"),w=h("t-select"),T=h("t-cascader"),U=h("t-input"),L=h("t-input-number"),N=h("t-card");return z(),R(K,null,[D(" \u57FA\u672C\u4FE1\u606F "),a(N,{title:""},{title:F(()=>[Q("\u5165\u4F4F\u914D\u7F6E"),a(c,{class:"placement bottom center titTpopup",content:"\u8BE5\u8D39\u7528\u4E3A\u6708\u8D26\u5355\uFF0C\u6BCF\u67081\u53F7\u6536\u5F53\u6708\u8D39\u7528",placement:"bottom",overlayClassName:"titTpopup","show-arrow":"","destroy-on-close":""},{default:F(()=>[a(o,{name:"error-circle-filled"})]),_:1})]),default:F(()=>[a(s,{label:"\u5165\u4F4F\u671F\u9650\uFF1A",name:"checkInTime"},{default:F(()=>[a(l,{modelValue:t.formData.checkInTime,"onUpdate:modelValue":u[0]||(u[0]=d=>t.formData.checkInTime=d),"disable-date":{before:V(ue)().subtract(1,"day").format()},"time-picker-props":m.value,placeholder:["\u5F00\u59CB\u65E5\u671F","\u7ED3\u675F\u65E5\u671F"],class:"wt-300",clearable:""},null,8,["modelValue","disable-date","time-picker-props"])]),_:1}),a(s,{label:"\u8D39\u7528\u671F\u9650\uFF1A",name:"costTime"},{default:F(()=>[a(l,{modelValue:t.formData.costTime,"onUpdate:modelValue":u[1]||(u[1]=d=>t.formData.costTime=d),"disable-date":{before:V(ue)().subtract(1,"day").format()},"time-picker-props":m.value,placeholder:["\u5F00\u59CB\u65E5\u671F","\u7ED3\u675F\u65E5\u671F"],clearable:"",class:"wt-300",onChange:y},null,8,["modelValue","disable-date","time-picker-props"])]),_:1}),a(s,{label:"\u62A4\u7406\u7B49\u7EA7\uFF1A",name:"nursingLevelId"},{default:F(()=>[a(w,{modelValue:t.formData.nursingLevelId,"onUpdate:modelValue":u[2]||(u[2]=d=>t.formData.nursingLevelId=d),clearable:"",filterable:"",placeholder:"\u8BF7\u9009\u62E9",class:"wt-300",onChange:A},{default:F(()=>[(z(!0),R(K,null,Fe(E.value,(d,ee)=>(z(),W(C,{key:ee,value:d.id,label:d.name,title:""},{default:F(()=>[Q(v(d.name),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"\u5165\u4F4F\u5E8A\u4F4D\uFF1A",name:"bedId"},{default:F(()=>[a(T,{modelValue:g.value,"onUpdate:modelValue":u[3]||(u[3]=d=>g.value=d),keys:{label:"code",value:"ids",children:"children"},options:t.floorData,class:"wt-300",onChange:j},null,8,["modelValue","options"])]),_:1}),a(s,{label:"\u62BC\u91D1\uFF1A",class:"dislodgeInputHover"},{default:F(()=>[Qe,a(U,{modelValue:t.formData.depositAmount,"onUpdate:modelValue":u[4]||(u[4]=d=>t.formData.depositAmount=d),class:"form-item-content wt-300",type:"search",placeholder:"\u8BF7\u8F93\u5165",clearable:"",readonly:!0},null,8,["modelValue"]),Ge]),_:1}),a(s,{label:"\u62A4\u7406\u8D39\u7528\uFF1A",name:"nursingCost"},{default:F(()=>[Ke,a(L,{modelValue:t.formData.nursingCost,"onUpdate:modelValue":u[5]||(u[5]=d=>t.formData.nursingCost=d),min:0,step:10,placeholder:"0.00","decimal-places":2,disabled:t.formData.nursingLevelId===void 0,onBlur:u[6]||(u[6]=d=>b(d,1)),onChange:u[7]||(u[7]=d=>b(d,1))},null,8,["modelValue","disabled"]),He]),_:1}),a(s,{label:"\u5E8A\u4F4D\u8D39\u7528\uFF1A",name:"bedCost"},{default:F(()=>[Je,a(L,{modelValue:t.formData.bedCost,"onUpdate:modelValue":u[8]||(u[8]=d=>t.formData.bedCost=d),min:0,step:10,placeholder:"0.00","decimal-places":2,disabled:t.formData.bedId===void 0,onBlur:u[9]||(u[9]=d=>b(d,2)),onChange:u[10]||(u[10]=d=>b(d,2))},null,8,["modelValue","disabled"]),We]),_:1}),a(s,{label:"\u5176\u4ED6\u8D39\u7528\uFF1A"},{default:F(()=>[Ye,a(L,{modelValue:t.formData.otherCost,"onUpdate:modelValue":u[11]||(u[11]=d=>t.formData.otherCost=d),min:0,step:10,placeholder:"0.00","decimal-places":2,onBlur:u[12]||(u[12]=d=>b(d,3)),onChange:u[13]||(u[13]=d=>b(d,3))},null,8,["modelValue"]),Xe]),_:1}),a(s,{label:"\u533B\u4FDD\u652F\u4ED8\uFF1A"},{default:F(()=>[Ze,a(L,{modelValue:t.formData.medicalInsurancePayment,"onUpdate:modelValue":u[14]||(u[14]=d=>t.formData.medicalInsurancePayment=d),min:0,step:10,placeholder:"0.00","decimal-places":2,onBlur:u[15]||(u[15]=d=>b(d,4)),onChange:u[16]||(u[16]=d=>b(d,4))},null,8,["modelValue"]),eu]),_:1}),a(s,{label:"\u653F\u5E9C\u8865\u8D34\uFF1A"},{default:F(()=>[uu,a(L,{modelValue:t.formData.governmentSubsidy,"onUpdate:modelValue":u[17]||(u[17]=d=>t.formData.governmentSubsidy=d),min:0,step:10,placeholder:"0.00","decimal-places":2,onBlur:u[18]||(u[18]=d=>b(d,5)),onChange:u[19]||(u[19]=d=>b(d,5))},null,8,["modelValue"]),tu]),_:1})]),_:1}),D(" end "),D(" end ")],2112)}}});var lu=q(au,[["__scopeId","data-v-063b08c8"],["__file","D:/project/2023/project-zzyl-v2.1/project-zzyl-admin-vue3-java/src/pages/enterQuitV2/enter/components/ConfigurationForm.vue"]]);const ou=M({__name:"TransactForm",props:{formData:{type:Object,default:()=>({})},baseData:{type:Object,default:()=>({})}},emits:["getVallidate","getContractPdf","handlePhone"],setup(t,{expose:P,emit:_}){const B=t,f=_;i();const g=i(!0),E=i([]),k=i({size:60,unit:"MB",message:"\u56FE\u7247\u5927\u5C0F\u8D85\u8FC760m\uFF0C\u8BF7\u91CD\u65B0\u4E0A\u4F20"}),m={contractName:[{required:!0,message:"\u5408\u540C\u540D\u79F0\u4E3A\u7A7A\uFF0C\u8BF7\u8F93\u5165\u5408\u540C\u540D\u79F0",type:"error",trigger:"blur"}],signDate:[{required:!0,message:"\u7B7E\u7EA6\u65E5\u671F\u4E3A\u7A7A\uFF0C\u8BF7\u9009\u62E9\u7B7E\u7EA6\u65E5\u671F",type:"error",trigger:"change"}],pdfUrl:[{required:!0,message:"\u4E0A\u4F20\u5408\u540C\u4E3A\u7A7A\uFF0C\u8BF7\u9009\u62E9\u4E0A\u4F20\u5408\u540C",type:"error",trigger:"change"}]};Y(B.formData,r=>{r.time&&E.value.length>0&&f("getVallidate",!1)}),X(()=>{});const $=()=>{E.value=[],formData.value.pdfUrl=""},b=r=>{G.error("\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25")},A=r=>{const u=r.response.data;f("getContractPdf",u),E.value[0].response.url=u,E.value[0].url=u},y=()=>{formData.value.checkOutTime=new Date},j=r=>{f("handlePhone",r)};return P({rules:m,handleClear:y}),(r,u)=>{const o=h("t-icon"),c=h("t-popup"),l=h("t-input"),s=h("t-form-item"),C=h("t-date-picker"),w=h("t-upload"),T=h("t-card");return z(),W(T,{title:""},{title:F(()=>[Q("\u7B7E\u7EA6\u529E\u7406 "),a(c,{class:"placement bottom center titTpopup",content:"",overlayClassName:"titTpopup",placement:"bottom","show-arrow":"","destroy-on-close":""},{content:F(()=>[Q(" \u5165\u4F4F\u6210\u529F\u540E\uFF0C\u7CFB\u7EDF\u5C06\u4F1A\u751F\u6210\u9996\u671F\u8D26\u5355\u3002\u751F\u6210\u8D26\u5355\u540E\uFF0C\u5165\u4F4F\u914D\u7F6E\u548C\u7B7E\u7EA6\u529E\u7406\u4FE1\u606F\u5C06\u65E0\u6CD5\u4FEE\u6539\uFF0C\u82E5\u4FEE\u6539\u4FE1\u606F\uFF0C\u9700\u529E\u7406\u9000\u4F4F\u6D41\u7A0B\u3002 ")]),default:F(()=>[a(o,{name:"error-circle-filled"})]),_:1})]),default:F(()=>[a(s,{label:"\u5408\u540C\u540D\u79F0\uFF1A",name:"contractName"},{default:F(()=>[a(l,{modelValue:t.formData.contractName,"onUpdate:modelValue":u[0]||(u[0]=U=>t.formData.contractName=U),placeholder:"\u8BF7\u8F93\u5165",class:"wt-300",clearable:"","show-limit-number":"",maxlength:20},null,8,["modelValue"])]),_:1}),a(s,{label:"\u7B7E\u7EA6\u65E5\u671F\uFF1A",name:"signDate"},{default:F(()=>[a(C,{modelValue:t.formData.signDate,"onUpdate:modelValue":u[1]||(u[1]=U=>t.formData.signDate=U),placeholder:"\u8BF7\u9009\u62E9",class:"wt-sm300",clearable:""},null,8,["modelValue"])]),_:1}),a(s,{label:"\u4E19\u65B9\u59D3\u540D\uFF1A",name:"memberName"},{default:F(()=>[a(l,{modelValue:t.formData.memberName,"onUpdate:modelValue":u[2]||(u[2]=U=>t.formData.memberName=U),placeholder:"\u8BF7\u8F93\u5165",class:"wt-300","show-limit-number":"",clearable:"",maxlength:10},null,8,["modelValue"])]),_:1}),a(s,{label:"\u4E19\u65B9\u8054\u7CFB\u65B9\u5F0F\uFF1A",name:"memberPhone"},{default:F(()=>[a(l,{modelValue:t.formData.memberPhone,"onUpdate:modelValue":u[3]||(u[3]=U=>t.formData.memberPhone=U),placeholder:"\u8BF7\u8F93\u5165",class:"wt-300",clearable:"","show-limit-number":"",maxlength:11,onChange:j},null,8,["modelValue"])]),_:1}),a(s,{label:"\u5165\u4F4F\u5408\u540C\uFF1A",name:"pdfUrl"},{default:F(()=>[a(w,{ref:"uploadRef",modelValue:E.value,"onUpdate:modelValue":u[4]||(u[4]=U=>E.value=U),action:"api/common/upload",autoUpload:g.value,"size-limit":k.value,tips:"\u8BF7\u4E0A\u4F20pdf\u6587\u4EF6\uFF0C\u5927\u5C0F\u572860M\u4EE5\u5185",accept:".pdf",onRemove:$,onFail:b,onSuccess:A},null,8,["modelValue","autoUpload","size-limit"])]),_:1})]),_:1})}}});var nu=q(ou,[["__file","D:/project/2023/project-zzyl-v2.1/project-zzyl-admin-vue3-java/src/pages/enterQuitV2/enter/components/TransactForm.vue"]]);const su={class:"dialogBox billDialog scrollTable"},ru={class:""},iu={class:"detailsList"},du={class:"details"},cu=e("label",null,"\u8D39\u7528\u7ED3\u7B97\uFF1A",-1),mu={class:"billTable"},Fu=e("ul",null,[e("li",null,"\u7C7B\u578B"),e("li",null,"\u8D39\u7528\u9879\u76EE"),e("li",null,"\u670D\u52A1\u5185\u5BB9"),e("li",null,"\u91D1\u989D\uFF08\u5143\uFF09")],-1),fu={class:"table"},vu=e("td",null,"\u6DFB\u52A0\u9879",-1),pu=e("td",null,"\u62A4\u7406\u8D39\u7528",-1),Du=e("td",null,"\u7279\u7EA7\u62A4\u7406\u7B49\u7EA7",-1),bu=e("td",null,null,-1),hu=e("td",null,"\u5E8A\u4F4D\u8D39\u7528",-1),gu=e("td",null,"\u7279\u62A4\u623F",-1),Eu=e("td",null,null,-1),Cu=e("td",null,"\u5176\u4ED6\u8D39\u7528",-1),Bu=e("td",null,"\u5176\u4ED6",-1),_u=e("td",null,"\u5C0F\u8BA1",-1),Au=e("td",null,null,-1),yu=e("td",null,null,-1),Iu=e("td",null,"\u6263\u51CF\u9879",-1),Vu=e("td",null,"\u533B\u4FDD\u652F\u4ED8",-1),$u=e("td",null,"--",-1),ku=e("td",null,null,-1),Nu=e("td",null,"\u653F\u5E9C\u8865\u8D34",-1),wu=e("td",null,"--",-1),Pu=e("td",null,"\u5C0F\u8BA1",-1),ju=e("td",null,null,-1),Uu=e("td",null,null,-1),xu=e("td",null,"\u6BCF\u6708\u5E94\u4ED8",-1),zu=e("td",null,null,-1),Tu=e("td",null,null,-1),Su=e("td",null,"\u672C\u671F\u5E94\u4ED8",-1),Ru=e("td",null,null,-1),Lu=e("td",null,null,-1),Ou=e("td",null,"\u62BC\u91D1",-1),Mu=e("td",null,null,-1),qu=e("td",null,null,-1),Qu=e("td",null,"\u8D26\u5355\u91D1\u989D",-1),Gu=e("td",null,null,-1),Ku=e("td",null,null,-1),Hu=M({__name:"BillDetails",props:{formData:{type:Object,default:()=>({})},baseData:{type:Object,default:()=>({})},visible:{type:Boolean,default:!1}},emits:["handleClose"],setup(t,{emit:P}){const _=t,B=P,f=i(null),g=i(null),E=i(!1),k=i(null),m=i(null),$=i(null),b=i(null),A=i(null),y=i(null),j=i(null),r=i(null),u=i({}),o=l=>{const s=new Date(l),C=s.getFullYear();let w=s.getMonth()+1;w=w<10?`0${w}`:w;const T=new Date(C,w,0);return`${C}-${w}-${T.getDate()}`};Y(()=>_.visible,l=>{if(E.value=_.visible,l){let s={};if(_.baseData.checkInConfigVo.id?(s=_.baseData.checkInConfigVo,u.value={...s,costTime:[H(s.costStartTime),H(s.costEndTime)],name:_.baseData.checkInElderVo.name}):(s=_.formData,u.value={...s,costTime:s.costTime}),console.log(_.baseData),console.log(s),u.value.costTime&&u.value.costTime.length>0){f.value=u.value.costTime[0],g.value=u.value.costTime[1];const w=new Date(f.value).getMonth()+1,U=new Date(g.value).getMonth()+1;w===U?(r.value=`${f.value}~${g.value}`,k.value=ie(f.value,g.value)):(r.value=`${f.value}~${o(f.value)}`,k.value=ie(f.value,o(f.value)))}if(m.value=Number(s.nursingCost)+Number(s.bedCost)+Number(s.otherCost===void 0?"0":s.otherCost),console.log(Number(s.nursingCost),Number(s.bedCost)),$.value=Number(s.medicalInsurancePayment?s.medicalInsurancePayment:0)+Number(s.governmentSubsidy?s.governmentSubsidy:0),b.value=m.value-$.value,b.value<0&&(b.value="0.00"),b.value>=0&&f.value){const C=$e(f.value);A.value=(b.value==="0.00"?0:b.value/C.days*k.value).toFixed(2)}A.value&&(y.value=Number(A.value)+Number(s.depositAmount)),y.value&&(j.value=y.value)}});const c=()=>{B("handleClose")};return(l,s)=>{const C=h("t-dialog");return z(),R("div",su,[a(C,{visible:E.value,"onUpdate:visible":s[0]||(s[0]=w=>E.value=w),header:"\u8D26\u5355\u9884\u89C8",footer:!1,"on-close":c},{body:F(()=>[D(" \u8868\u5355\u5185\u5BB9 "),e("div",ru,[e("div",iu,[e("ul",null,[e("li",null,[Q(" \u8D26\u5355\u6708\u4EFD\uFF1A"),e("label",null,v(f.value?V(ke)(f.value):"--"),1)]),e("li",null,[Q(" \u8001\u4EBA\u59D3\u540D\uFF1A"),e("label",null,v(u.value.name?u.value.name:"--"),1)]),e("li",null,[Q(" \u8D26\u5355\u5468\u671F\uFF1A"),e("label",null,v(r.value?r.value:"--"),1)]),e("li",null,[Q(" \u5171\u8BA1\u5929\u6570\uFF1A"),e("label",null,v(k.value?k.value+"\u5929":"--"),1)])]),e("div",du,[cu,e("div",mu,[Fu,e("div",fu,[e("table",null,[e("tr",null,[vu,pu,Du,e("td",null,v(u.value.nursingCost?V(S)(u.value.nursingCost):"--"),1)]),e("tr",null,[bu,hu,gu,e("td",null,v(u.value.bedCost?V(S)(u.value.bedCost):"--"),1)]),e("tr",null,[Eu,Cu,Bu,e("td",null,v(u.value.otherCost?V(S)(u.value.otherCost):"--"),1)]),e("tr",null,[_u,Au,yu,e("td",null,[e("strong",null,v(m.value?V(S)(m.value):"--"),1)])]),e("tr",null,[Iu,Vu,$u,e("td",null,v(u.value.medicalInsurancePayment?"- "+V(S)(u.value.medicalInsurancePayment):"--"),1)]),e("tr",null,[ku,Nu,wu,e("td",null,v(u.value.governmentSubsidy?"- "+V(S)(u.value.governmentSubsidy):"--"),1)]),e("tr",null,[Pu,ju,Uu,e("td",null,[e("strong",null,v($.value?"- "+V(S)($.value):"--"),1)])]),e("tr",null,[xu,zu,Tu,e("td",null,[e("strong",null,v(b.value===0||b.value?V(S)(b.value):"--"),1)])]),e("tr",null,[Su,Ru,Lu,e("td",null,v(A.value===0||A.value?A.value:"--"),1)]),e("tr",null,[Ou,Mu,qu,e("td",null,v(V(S)(u.value.depositAmount)),1)]),e("tr",null,[Qu,Gu,Ku,e("td",null,[e("strong",null,v(y.value===0||y.value?V(S)(y.value):"--"),1)])])])])])])])])]),_:1},8,["visible"])])}}});var pe=q(Hu,[["__file","D:/project/2023/project-zzyl-v2.1/project-zzyl-admin-vue3-java/src/pages/enterQuitV2/enter/components/BillDetails.vue"]]);const Ju={class:"detail-base"},Wu={class:"info-block"},Yu={class:"info-item"},Xu=e("h1",{class:"label-wt"},"\u8001\u4EBA\u59D3\u540D\uFF1A",-1),Zu={class:"info-item"},et=e("h1",{class:"label-wt"},"\u8001\u4EBA\u8EAB\u4EFD\u8BC1\u53F7\uFF1A",-1),ut={class:"info-item"},tt=e("h1",{class:"label-wt"},"\u51FA\u751F\u65E5\u671F\uFF1A",-1),at={class:"info-item"},lt=e("h1",{class:"label-wt"},"\u5E74\u9F84\uFF1A",-1),ot={class:"info-item"},nt=e("h1",{class:"label-wt"},"\u6027\u522B\uFF1A",-1),st={class:"info-item"},rt=e("h1",{class:"label-wt"},"\u8054\u7CFB\u65B9\u5F0F\uFF1A",-1),it={class:"info-item"},dt=e("h1",{class:"label-wt"},"\u5BB6\u5EAD\u4F4F\u5740\uFF1A",-1),ct={class:"info-item"},mt=e("h1",{class:"label-wt"},"\u4E00\u5BF8\u7167\u7247\uFF1A",-1),Ft={class:"info-item"},ft=e("h1",{class:"label-wt"},"\u8EAB\u4EFD\u8BC1\u4EBA\u50CF\u9762\uFF1A",-1),vt={class:"info-item"},pt=e("h1",{class:"label-wt"},"\u8EAB\u4EFD\u8BC1\u56FD\u5FBD\u9762\uFF1A",-1),Dt=M({__name:"ApplyBase",props:{baseData:{type:Object,default:()=>({})}},setup(t,{expose:P}){const _=t,B=i([{url:""}]),f=i([{url:""}]),g=i([{url:""}]);Y(_,k=>{const m=_.baseData;B.value[0].url=m.oneInchPhoto,f.value[0].url=m.idCardNationalEmblemImg,g.value[0].url=m.idCardPortraitImg});const E=i();return P({form:E}),(k,m)=>{const $=h("t-upload"),b=h("t-card");return z(),R("div",Ju,[D(" \u57FA\u672C\u4FE1\u606F "),a(b,{title:"\u57FA\u672C\u4FE1\u606F"},{default:F(()=>[e("div",Wu,[e("div",Yu,[Xu,e("span",null,v(t.baseData.name),1)]),e("div",Zu,[et,e("span",null,v(t.baseData.idCardNo),1)]),e("div",ut,[tt,e("span",null,v(t.baseData.birthday),1)]),e("div",at,[lt,e("span",null,v(t.baseData.age),1)]),e("div",ot,[nt,e("span",null,v(t.baseData.sex===0?"\u7537":"\u5973"),1)]),e("div",st,[rt,e("span",null,v(t.baseData.phone),1)]),e("div",it,[dt,e("span",null,v(t.baseData.address),1)]),e("div",ct,[mt,e("span",null,[a($,{ref:"uploadRef",modelValue:B.value,"onUpdate:modelValue":m[0]||(m[0]=A=>B.value=A),action:"",theme:"image",disabled:!0},null,8,["modelValue"])])]),e("div",Ft,[ft,e("span",null,[a($,{ref:"uploadRef",modelValue:g.value,"onUpdate:modelValue":m[1]||(m[1]=A=>g.value=A),action:"",theme:"image",disabled:!0},null,8,["modelValue"])])]),e("div",vt,[pt,e("span",null,[a($,{ref:"uploadRef",modelValue:f.value,"onUpdate:modelValue":m[2]||(m[2]=A=>f.value=A),action:"",theme:"image",disabled:!0},null,8,["modelValue"])])])])]),_:1}),D(" end ")])}}});var bt=q(Dt,[["__file","D:/project/2023/project-zzyl-v2.1/project-zzyl-admin-vue3-java/src/pages/enterQuitV2/enter/components/ApplyBase.vue"]]);const ht={class:"detail-base"},gt={class:"info-block"},Et={class:"info-item"},Ct=e("h1",null,"\u5165\u4F4F\u671F\u9650\uFF1A",-1),Bt={class:"info-item"},_t=e("h1",null,"\u8D39\u7528\u671F\u9650\uFF1A",-1),At={class:"info-item"},yt=e("h1",null,"\u62A4\u7406\u7B49\u7EA7\uFF1A",-1),It={class:"info-item"},Vt=e("h1",null,"\u5165\u4F4F\u5E8A\u4F4D\uFF1A",-1),$t={class:"info-item"},kt=e("h1",null,"\u62BC\u91D1\uFF1A",-1),Nt={class:"info-item"},wt=e("h1",null,"\u62A4\u7406\u8D39\u7528\uFF1A",-1),Pt={class:"info-item"},jt=e("h1",null,"\u5E8A\u4F4D\u8D39\u7528\uFF1A",-1),Ut={class:"info-item"},xt=e("h1",null,"\u5176\u4ED6\u8D39\u7528\uFF1A",-1),zt={class:"info-item"},Tt=e("h1",null,"\u533B\u4FDD\u652F\u4ED8\uFF1A",-1),St={class:"info-item"},Rt=e("h1",null,"\u653F\u5E9C\u8865\u8D34\uFF1A",-1),Lt=M({__name:"ApplyConfigBase",props:{baseData:{type:Object,default:()=>({})}},setup(t){const P=()=>{billVisible.value=!1};return(_,B)=>{const f=h("t-card");return z(),R("div",ht,[D(" \u57FA\u672C\u4FE1\u606F "),a(f,{title:"\u5165\u4F4F\u914D\u7F6E"},{default:F(()=>[e("div",gt,[e("div",Et,[Ct,e("span",null,v(V(H)(t.baseData.checkInStartTime))+"~"+v(V(H)(t.baseData.checkInEndTime)),1)]),e("div",Bt,[_t,e("span",null,v(V(H)(t.baseData.costStartTime))+"~"+v(V(H)(t.baseData.costEndTime)),1)]),e("div",At,[yt,e("span",null,v(t.baseData.nursingLevelName),1)]),e("div",It,[Vt,e("span",null,v(t.baseData.bedNumber),1)]),e("div",$t,[kt,e("span",null,v(V(S)(t.baseData.depositAmount))+" \u5143",1)]),e("div",Nt,[wt,e("span",null,v(V(S)(t.baseData.nursingCost))+" \u5143/\u6708",1)]),e("div",Pt,[jt,e("span",null,v(V(S)(t.baseData.bedCost))+" \u5143/\u6708",1)]),e("div",Ut,[xt,e("span",null,v(t.baseData.otherCost?V(S)(t.baseData.otherCost)+" \u5143/\u6708":"--"),1)]),e("div",zt,[Tt,e("span",null,v(t.baseData.medicalInsurancePayment?V(S)(t.baseData.medicalInsurancePayment)+" \u5143/\u6708":"--"),1)]),e("div",St,[Rt,e("span",null,v(t.baseData.governmentSubsidy?V(S)(t.baseData.governmentSubsidy)+"\u5143/\u6708":"--"),1)])])]),_:1}),D(" end "),a(pe,{visible:_.billVisible,"form-data":_.formData,onHandleClose:P},null,8,["visible","form-data"])])}}});var Ot=q(Lt,[["__file","D:/project/2023/project-zzyl-v2.1/project-zzyl-admin-vue3-java/src/pages/enterQuitV2/enter/components/ApplyConfigBase.vue"]]);const Mt=M({__name:"baseFamily",props:{baseData:{type:Object,default:()=>({})}},setup(t){const P=i(),_=ae(()=>[{title:"\u5BB6\u5C5E\u59D3\u540D",colKey:"name",minWidth:200},{title:"\u5BB6\u5C5E\u8054\u7CFB\u65B9\u5F0F",colKey:"phone",minWidth:200},{title:"\u4E0E\u8001\u4EBA\u5173\u7CFB",colKey:"kinship",minWidth:200}]);return(B,f)=>{const g=h("t-table"),E=h("t-card");return z(),R(K,null,[D(" \u5BB6\u5C5E\u4FE1\u606F "),a(E,{title:"\u5BB6\u5C5E\u4FE1\u606F",class:"familyBox"},{default:F(()=>[a(g,{ref_key:"tableRef",ref:P,"row-key":"key",columns:_.value,data:t.baseData,"table-layout":"auto"},null,8,["columns","data"])]),_:1})],2112)}}});var qt=q(Mt,[["__file","D:/project/2023/project-zzyl-v2.1/project-zzyl-admin-vue3-java/src/pages/enterQuitV2/enter/components/baseFamily.vue"]]);const Qt={class:"detail-base sign"},Gt={class:"info-block"},Kt={class:"info-item"},Ht=e("h1",null,"\u5408\u540C\u540D\u79F0\uFF1A",-1),Jt={class:"info-item"},Wt=e("h1",{class:"label-wt-long"},"\u7B7E\u7EA6\u65E5\u671F\uFF1A",-1),Yt={class:"info-item"},Xt=e("h1",null,"\u4E19\u65B9\u59D3\u540D\uFF1A",-1),Zt={class:"info-item"},ea=e("h1",{class:"label-wt-long"},"\u4E19\u65B9\u8054\u7CFB\u65B9\u5F0F\uFF1A",-1),ua={class:"info-item"},ta=e("h1",null,"\u5165\u4F4F\u5408\u540C\uFF1A",-1),aa=["href"],la=M({__name:"SignBaseInfo",props:{baseData:{type:Object,default:()=>({})},elderVo:{type:Object,default:()=>({})}},setup(t){return(P,_)=>{const B=h("t-card");return z(),R("div",Qt,[D(" \u7B7E\u7EA6\u529E\u7406 "),a(B,{title:"\u7B7E\u7EA6\u529E\u7406"},{default:F(()=>[e("div",Gt,[e("div",Kt,[Ht,e("span",null,v(t.baseData.name),1)]),e("div",Jt,[Wt,e("span",null,v(V(H)(t.baseData.signDate)),1)]),e("div",Yt,[Xt,e("span",null,v(t.baseData.memberName?t.baseData.memberName:"--"),1)]),e("div",Zt,[ea,e("span",null,v(t.baseData.memberPhone?t.baseData.memberPhone:"--"),1)]),e("div",ua,[ta,e("span",null,[Q(v(t.elderVo.name)+"\u7684\u5165\u4F4F\u5408\u540C.pdf ",1),e("i",null,[e("a",{class:"font-bt",href:t.baseData.pdfUrl,target:"black"},"\u67E5\u770B",8,aa)]),D(` <i\r
              class="font-bt"\r
              @click="handleDown(formData.pdfUrl, '\u4F53\u68C0\u62A5\u544A\u6587\u4EF6')"\r
              >\u4E0B\u8F7D</i\r
            > `)])])])]),_:1}),D(" end ")])}}});var oa=q(la,[["__file","D:/project/2023/project-zzyl-v2.1/project-zzyl-admin-vue3-java/src/pages/enterQuitV2/enter/components/SignBaseInfo.vue"]]);const na={class:"apply detail-base checkInDetail"},sa={class:"bg-wt min-steph height"},ra={key:0,class:"dialog-form cleckInForm"},ia={class:"boxBottom fx fx-ct bg-wt"},da=M({__name:"details",setup(t){const P=ye(),_=Ie();me();const B=i(null),f=i(!1),g=i(null),E=i(null),k=i(null),m=i({}),$=i(!1),b=i(null),A=i([]),y=i(!1),j=i([]),r=i(""),u=i({checkInConfigVo:{},checkInContractVo:{},checkInElderVo:{},elderFamilyVoList:[]}),o=i({checkInElderDto:{},depositAmount:"3000.00",signDate:new Date}),c=i(!1);X(()=>{Ve(()=>{window.addEventListener("scroll",l,!0)}),m.value={...g.value.rules,...E.value.rules,...k.value.rules},P.query.id&&(r.value=P.query.id,s(r.value)),ge()});const l=p=>{if(p.stopPropagation(),p.target.className==="t-layout czri-layout"){const{scrollTop:n,clientHeight:I,scrollHeight:x}=p.target;n+I===x?f.value=!0:f.value=!1}},s=async p=>{await Pe(p).then(n=>{n.code===200&&(u.value=n.data,u.value.checkInElderVo.age=se(u.value.checkInElderVo.idCardNo).age)})},C=(p,n)=>{console.log(p),n===1?o.value.oneInchPhoto=p:n===2?o.value.idCardPortraitImg=p:o.value.idCardNationalEmblemImg=p},w=()=>{const p=se(o.value.idCardNo);fe(o.value.idCardNo)&&(o.value.sex=p.sex,o.value.birthday=p.birthday,o.value.age=p.age)},T=p=>{re(p)||(o.value.phone="")},U=p=>{re(p)||(o.value.memberPhone="")},L=(p,n)=>{let I=null;n===1?(I=Number(o.value.nursingCost),o.value.nursingCost=I<0?"0.00":o.value.nursingCost):n===2?(I=Number(o.value.bedCost),o.value.bedCost=I<0?"0.00":o.value.bedCost):n===3?(I=Number(o.value.otherCost),o.value.otherCost=I<0?"0.00":o.value.otherCost):n===4?(I=Number(o.value.medicalInsurancePayment),o.value.medicalInsurancePayment=I<0?"0.00":o.value.medicalInsurancePayment):(I=Number(o.value.governmentSubsidy),o.value.governmentSubsidy=I<0?"0.00":o.value.governmentSubsidy)},N=(p,n)=>{if(o.value.nursingLevelName=p.label,p!==void 0){const I=n.find(x=>x.id===p.value);o.value.nursingCost=I.fee,o.value.fee=I.fee}else o.value.nursingCost="",o.value.fee=""},d=(p,n)=>{o.value.bedId=p,j.value.forEach(I=>{I.children.forEach(x=>{x.floorId===I.id&&x.id===n.roomId&&(o.value.floorName=I.name,o.value.floorId=I.id,o.value.bedCost=x.price,o.value.price=x.price,o.value.code=x.code,o.value.roomId=x.id)})})},ee=p=>{o.value.pdfUrl=p},De=()=>{$.value=!0},be=()=>{$.value=!1},he=(p,n)=>{A.value=p,y.value=n},ge=async()=>{const p=await we(0);p.code===200&&(j.value=p.data,j.value.forEach((n,I)=>{n.code=n.name,n.ids=`f${n.id}`,n.roomVoList.length===0?j.value.splice(I,1):(n.children=n.roomVoList,n.children.forEach(x=>{x.ids=`r${x.id}`,x.bedVoList.length===0?j.value.splice(I,1):(x.children=x.bedVoList,x.children.forEach(Z=>{Z.ids=`b${Z.id}`,Z.code=Z.bedNumber}))}))}))},J=()=>{setTimeout(()=>{c.value=!1,clearTimeout()},3e3)},le=i([]),Ee=()=>{if(c.value)return!1;b.value.tableRef.validateTableData().then(p=>{const n=Object.keys(p.result);le.value=p.result[n[0]],le.value?(y.value=!1,J(),G.error("\u5BB6\u5C5E\u4FE1\u606F\u4E3A\u7A7A\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165")):(y.value=!0,A.value=b.value.familyUserData,J())}),B.value.validate().then(async p=>{const n=o.value,I={checkInElderDto:{oneInchPhoto:n.oneInchPhoto,idCardPortraitImg:n.idCardPortraitImg,idCardNationalEmblemImg:n.idCardNationalEmblemImg,address:n.address,age:n.age,birthday:n.birthday,idCardNo:n.idCardNo,name:n.name,phone:n.phone,sex:n.sex},elderFamilyDtoList:A.value,checkInContractDto:{name:n.contractName,signDate:Ne(n.signDate),memberName:n.memberName,memberPhone:n.memberPhone,pdfUrl:n.pdfUrl},checkInConfigDto:{bedCost:n.bedCost,bedId:n.bedId,checkInStartTime:de(n.checkInTime[0]),checkInEndTime:ce(n.checkInTime[1]),code:n.code,roomId:n.roomId,floorId:n.floorId,floorName:n.floorName,costStartTime:de(n.costTime[0]),costEndTime:ce(n.costTime[1]),depositAmount:n.depositAmount,governmentSubsidy:n.governmentSubsidy?n.governmentSubsidy:0,medicalInsurancePayment:n.medicalInsurancePayment?n.medicalInsurancePayment:0,nursingCost:n.nursingCost,nursingLevelId:n.nursingLevelId,nursingLevelName:n.nursingLevelName,otherCost:n.otherCost?n.otherCost:0}};if(n.memberPhone&&!ve(o.value.memberPhone))return G.error("\u4E19\u65B9\u8054\u7CFB\u65B9\u5F0F\u9519\u8BEF\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165"),J(),y.value=!0,!1;p===!0&&y.value&&(c.value=!0,y.value=!0,await je(I).then(x=>{x.code===200?(J(),G.success("\u6DFB\u52A0\u6210\u529F"),_.push({path:"/enterQuit/enterManage"})):J()}))})},Ce=()=>{_.push({path:"/enterQuit/enterManage"})};return(p,n)=>{const I=h("t-form");return z(),R(K,null,[D(" \u8868\u5355\u9875 "),e("div",na,[e("div",sa,[r.value===""?(z(),R("div",ra,[a(I,{ref_key:"form",ref:B,data:o.value,rules:m.value,"label-width":135},{default:F(()=>[D(" \u57FA\u672C\u4FE1\u606F "),a(Le,{ref_key:"applyForm",ref:g,formData:o.value,onGetUpdateImg:C,onHandleCardNo:w,onHandlePhone:T},null,8,["formData"]),D(" end "),D(" \u5BB6\u5C5E\u4FE1\u606F "),a(qe,{ref_key:"family",ref:b,onSetFamily:he},null,512),D(" end "),D(" \u5165\u4F4F\u914D\u7F6E "),a(lu,{ref_key:"config",ref:E,formData:o.value,floorData:j.value,onSetBedId:d,onTextBlurPrice:L,onHandleNursing:N},null,8,["formData","floorData"]),D(" end "),D(" \u7B7E\u7EA6\u529E\u7406 "),a(nu,{ref_key:"transactForm",ref:k,formData:o.value,onGetContractPdf:ee,onHandlePhone:U},null,8,["formData"]),D(" end ")]),_:1},8,["data","rules"])])):(z(),R(K,{key:1},[D(" \u8BE6\u60C5\u663E\u793A "),e("div",null,[a(bt,{baseData:u.value.checkInElderVo},null,8,["baseData"]),a(qt,{baseData:u.value.elderFamilyVoList},null,8,["baseData"]),a(Ot,{baseData:u.value.checkInConfigVo},null,8,["baseData"]),a(oa,{baseData:u.value.checkInContractVo,elderVo:u.value.checkInElderVo},null,8,["baseData","elderVo"])])],2112)),D(" end ")])]),D(" end "),D(" \u5E95\u90E8 "),e("div",ia,[e("button",{class:"bt-grey wt-60",onClick:Ce},"\u8FD4\u56DE"),r.value===""?(z(),R("button",{key:0,theme:"primary",class:"bt wt-60",onClick:Ee}," \u63D0\u4EA4 ")):D("v-if",!0),e("button",{theme:"primary",class:"bt wt-88",onClick:De}," \u8D26\u5355\u9884\u89C8 ")]),D(" end "),D(" \u8D26\u5355\u9884\u89C8\u5F39\u5C42 "),a(pe,{visible:$.value,"form-data":o.value,"base-data":u.value,onHandleClose:be},null,8,["visible","form-data","base-data"]),D(" end ")],64)}}});var ba=q(da,[["__scopeId","data-v-564b3dcb"],["__file","D:/project/2023/project-zzyl-v2.1/project-zzyl-admin-vue3-java/src/pages/enterQuitV2/enter/details.vue"]]);export{ba as default};
