import{d as j,b as L,e as d,o as y,h as F,q as m,i as u,w as n,B as N,z as $,n as W,A as T,g as p,f as O,_ as V,r as c,F as K,E as R,u as H,C as q,M as I,y as M,a0 as P}from"./index.c5b6faf2.js";import{j as G,k as J}from"./date.a9e2d8fb.js";import{m as U,j as Q}from"./commonData.8892e613.js";import{d as X,e as Y}from"./synergy.5d8f0376.js";import{b as Z}from"./checkin.2c0c2a4d.js";import{S as ee}from"./switchBar.3a8341ea.js";import{N as te}from"./index.ea73f821.js";const ae=[{title:"\u5E8F\u53F7",align:"left",width:80,minWidth:80,colKey:"rowIndex"},{title:"\u5355\u636E\u7F16\u53F7",minWidth:180,colKey:"code"},{title:"\u5355\u636E\u6807\u9898",minWidth:180,colKey:"title"},{title:"\u5355\u636E\u7C7B\u522B",minWidth:180,colKey:"type"},{title:"\u7533\u8BF7\u4EBA",minWidth:180,colKey:"applicat"},{title:"\u7533\u8BF7\u65F6\u95F4",minWidth:300,colKey:"applicationTime"},{title:"\u5B8C\u6210\u65F6\u95F4",minWidth:300,colKey:"finishTime"},{title:"\u6D41\u7A0B\u72B6\u6001",colKey:"status",width:120,minWidth:"120px",cell:(s,{row:h})=>{const r={1:{label:"\u7533\u8BF7\u4E2D"},2:{label:"\u5DF2\u5B8C\u6210"},3:{label:"\u5DF2\u5173\u95ED"}};return s("span",{class:`status-dot status-dot-${h.status}`},r[h.status].label)}},{align:"left",fixed:"right",width:110,colKey:"op",title:"\u64CD\u4F5C"}],le={class:"baseList"},ue={class:"tableBoxs"},ne={key:0},se={key:1},oe={key:2},ie={class:"operateCon"},ce=["onClick"],de=["onClick"],re="index",pe=j({__name:"TableList",props:{listData:{type:Object,default:()=>[]},total:{type:Number,default:0},pagination:{type:Object,default:()=>({})},dataLoading:{type:Boolean,default:!1}},emits:["handleOpen","getCurrent"],setup(s,{emit:h}){const r=L(),f=h,v=l=>{l.type===1?r.push({path:"/active/applyDetails",query:{assigneeId:l.assigneeId,code:l.code,taskId:l.id,path:"apply"}}):l.type===2?console.log(l.type):r.push({path:"/active/checkDetails",query:{assigneeId:l.assigneeId,code:l.code,taskId:l.id,path:"apply"}})},g=l=>{f("getCurrent",l)},B=l=>{l.type===1&&l.status===1&&l.flowStatus<=5&&f("handleOpen",l),l.type===3&&l.status===1&&f("handleOpen",l)};return(l,o)=>{const _=d("t-table"),e=d("t-pagination");return y(),F("div",le,[m("div",ue,[u(_,{data:s.listData,columns:T(ae),"row-key":re,"vertical-align":"middle",hover:!0,loading:s.dataLoading,"table-layout":"fixed","table-content-width":"100%"},{rowIndex:n(({rowIndex:t})=>[N($(t+1),1)]),type:n(({row:t})=>[t.type===1?(y(),F("span",ne,"\u9000\u4F4F")):t.type===2?(y(),F("span",se,"\u8BF7\u5047")):(y(),F("span",oe,"\u5165\u4F4F"))]),finishTime:n(({row:t})=>[N($(t.finishTime?t.finishTime:"--"),1)]),op:n(({row:t})=>[m("div",ie,[m("a",{class:W(["font-bt",t.status===2||t.status===3||t.status===1&&t.flowStatus>5?"disabled":""]),onClick:b=>B(t)},"\u64A4\u9500",10,ce),m("a",{class:"font-bt",onClick:b=>v(t)},"\u67E5\u770B",8,de)])]),empty:n(()=>[u(te)]),_:1},8,["data","columns","loading"]),p(" \u5206\u9875 "),s.total>10?(y(),O(e,{key:0,modelValue:s.pagination.pageNum,"onUpdate:modelValue":o[0]||(o[0]=t=>s.pagination.pageNum=t),pageSize:s.pagination.pageSize,"onUpdate:pageSize":o[1]||(o[1]=t=>s.pagination.pageSize=t),total:s.total,onChange:g},null,8,["modelValue","pageSize","total"])):p("v-if",!0),p(" end ")])])}}});var me=V(pe,[["__file","D:/project/2023/project-zzyl-v2.1/project-zzyl-admin-vue3-java/src/pages/synergy/apply/components/TableList.vue"]]);const fe={class:"formBox"},ve=j({__name:"SearchForm",props:{searchData:{type:Object,default:()=>({})}},emits:["handleSearch","handleReset","handleClear"],setup(s,{emit:h}){const r=h,f=c(null),v=c([]),g=()=>{v.value=[],f.value.reset(),r("handleReset")},B=()=>{r("handleSearch",v.value)},l=(_,e)=>{e.trigger==="clear"&&r("handleClear",e.trigger)},o=_=>{r("handleClear",_)};return(_,e)=>{const t=d("t-input"),b=d("t-form-item"),C=d("t-col"),D=d("t-option"),k=d("t-select"),E=d("t-date-range-picker"),S=d("t-row"),z=d("t-form");return y(),F("div",fe,[u(z,{ref_key:"form",ref:f,model:s.searchData,"label-width":98},{default:n(()=>[u(S,null,{default:n(()=>[u(C,null,{default:n(()=>[u(b,{label:"\u5355\u636E\u7F16\u53F7\uFF1A",name:"code"},{default:n(()=>[u(t,{modelValue:s.searchData.code,"onUpdate:modelValue":e[0]||(e[0]=i=>s.searchData.code=i),class:"form-item-content",type:"search",placeholder:"\u8BF7\u8F93\u5165",clearable:"",onClear:e[1]||(e[1]=i=>o("code"))},null,8,["modelValue"])]),_:1})]),_:1}),u(C,null,{default:n(()=>[u(b,{label:"\u5355\u636E\u7C7B\u522B\uFF1A",name:"type"},{default:n(()=>[u(k,{modelValue:s.searchData.type,"onUpdate:modelValue":e[2]||(e[2]=i=>s.searchData.type=i),clearable:"",filterable:"",placeholder:"\u8BF7\u9009\u62E9",onClear:e[3]||(e[3]=i=>o("type"))},{default:n(()=>[(y(!0),F(K,null,R(T(U),(i,A)=>(y(),O(D,{key:A,value:i.id,label:i.value,title:""},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),u(C,null,{default:n(()=>[u(b,{label:"\u7533\u8BF7\u65F6\u95F4\uFF1A",name:"applicationTime"},{default:n(()=>[u(E,{modelValue:v.value,"onUpdate:modelValue":e[4]||(e[4]=i=>v.value=i),placeholder:["\u5F00\u59CB\u65E5\u671F","\u7ED3\u675F\u65E5\u671F"],clearable:"",onChange:l},null,8,["modelValue"])]),_:1})]),_:1}),p(" \u6309\u94AE\u533A\u57DF "),u(C,{class:"searchBtn"},{default:n(()=>[m("button",{type:"button",class:"bt-grey wt-60",onClick:e[5]||(e[5]=i=>g())}," \u91CD\u7F6E "),m("button",{type:"button",class:"bt wt-60",onClick:e[6]||(e[6]=i=>B())}," \u641C\u7D22 ")]),_:1})]),_:1})]),_:1},8,["model"])])}}});var ye=V(ve,[["__file","D:/project/2023/project-zzyl-v2.1/project-zzyl-admin-vue3-java/src/pages/synergy/apply/components/SearchForm.vue"]]);const he={class:"dialog-form"},_e={class:"dialogCenter"},ge=m("div",null,[m("button",{class:"bt bt-grey wt-60",type:"reset"},"\u53D6\u6D88"),m("button",{theme:"primary",type:"submit",class:"bt wt-60"},[m("span",null,"\u786E\u5B9A")])],-1),be=j({__name:"applyClass",props:{visible:{type:Boolean,default:!1}},emits:["handleClose"],setup(s,{expose:h,emit:r}){const f=s,v=r,g=L(),B=c("empty"),l=c(),o=c(!1),_=H(),e=c({}),t={status:[{required:!0,message:"\u5355\u636E\u7C7B\u522B\u4E3A\u7A7A\uFF0C\u8BF7\u9009\u62E9\u5355\u636E\u7C7B\u522B",type:"error",trigger:"change"}]};q(()=>f.visible,()=>{o.value=f.visible});const b=k=>{k.validateResult===!0&&(e.value.status===1?(D(),g.push({path:"/active/applyDetails"})):e.value.status===2?I.info("\u7A0B\u5E8F\u5C0F\u54E5\u54E5\u6B63\u5728\u5F00\u53D1\u4E2D!"):(D(),_.setEnterBaseData({}),g.push({path:"/active/checkDetails"})))},C=()=>{l.value.reset()},D=()=>{C(),v("handleClose")};return h({handleClear:C}),(k,E)=>{const S=d("t-radio"),z=d("t-radio-group"),i=d("t-form-item"),A=d("t-form"),w=d("t-dialog");return y(),F("div",he,[u(w,{visible:o.value,"onUpdate:visible":E[1]||(E[1]=a=>o.value=a),header:"\u9009\u62E9\u7533\u8BF7\u5355\u636E\u7C7B\u522B",footer:!1,"on-close":D},{body:n(()=>[p(" \u8868\u5355\u5185\u5BB9 "),m("div",_e,[u(A,{ref_key:"form",ref:l,data:e.value,rules:t,"label-width":108,"on-cancel":"onClickCloseBtn","reset-type":B.value,onReset:D,onSubmit:b},{default:n(()=>[u(i,{label:"\u5355\u636E\u7C7B\u522B\uFF1A",name:"status"},{default:n(()=>[u(z,{modelValue:e.value.status,"onUpdate:modelValue":E[0]||(E[0]=a=>e.value.status=a)},{default:n(()=>[(y(!0),F(K,null,R(T(U),(a,x)=>(y(),O(S,{key:x,value:a.id},{default:n(()=>[N($(a.value),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(i,{class:"dialog-footer"},{default:n(()=>[ge]),_:1})]),_:1},8,["data","reset-type"])])]),_:1},8,["visible"])])}}});var Ce=V(be,[["__file","D:/project/2023/project-zzyl-v2.1/project-zzyl-admin-vue3-java/src/pages/synergy/apply/components/applyClass.vue"]]);const Fe={class:"min-h subscribe bg-wt"},Be={class:"marg-main newBox"},De=j({__name:"index",setup(s){const h=c([]),r=c(!1),f=c(0),v=c(!1),g=c(""),B=c(""),l=c(!1),o=c(""),_=c(null),e=c({pageSize:10,pageNum:1});M(()=>{t()});const t=async()=>{r.value=!1;try{const a=await X(e.value);h.value=a.data.records,f.value=Number(a.data.total)}finally{r.value=!1}},b=a=>{e.value.pageNum=1,a.length>0&&(e.value.startTime=G(a[0]),e.value.endTime=J(a[1])),t()},C=()=>{e.value={pageSize:10,pageNum:1},_.value.currentId=0,t()},D=a=>{e.value.pageNum=1,a>=0&&(e.value.status=a),e.value.startTime="",e.value.endTime="",t()},k=a=>{e.value.pageNum=a.current,e.value.pageSize=a.pageSize,t()},E=async()=>{if(o.value.type===1){const a={retreatCode:o.value.code,taskId:o.value.id};(await Y(a)).code===200&&(I.success("\u64CD\u4F5C\u6210\u529F"),i(),t())}else if(o.value.type===2)console.log("\u8BF7\u5047");else{const a={id:Number(o.value.checkInId),taskId:o.value.id};(await Z(a)).code===200&&(I.success("\u64CD\u4F5C\u6210\u529F"),i(),t())}},S=()=>{l.value=!0},z=a=>{o.value=a,g.value="\u786E\u8BA4\u64A4\u9500",B.value="\u64A4\u9500\u5DF2\u63D0\u4EA4\u4FE1\u606F",v.value=!0},i=()=>{v.value=!1},A=()=>{l.value=!1},w=a=>{a==="code"?delete e.value.code:a==="applicat"?delete e.value.applicat:a==="type"?delete e.value.type:(delete e.value.startTime,delete e.value.endTime),e.value={...e.value},t()};return(a,x)=>(y(),F("div",Fe,[p(" \u7B5B\u9009\u533A\u57DF "),u(ye,{"search-data":e.value,onHandleClear:w,onHandleSearch:b,onHandleReset:C},null,8,["search-data"]),p(" end "),p(" tab\u5BFC\u822A "),m("div",Be,[u(ee,{ref_key:"tabBar",ref:_,data:T(Q),onChangeId:D},null,8,["data"]),m("div",{class:"tabBtn"},[m("button",{class:"bt wt-120",onClick:S},"\u53D1\u8D77\u7533\u8BF7")])]),p(" \u8868\u683C "),u(me,{"list-data":h.value,pagination:e.value,total:f.value,onHandleOpen:z,onGetCurrent:k},null,8,["list-data","pagination","total"]),p(" end "),p(" \u9009\u62E9\u7533\u8BF7\u7C7B\u522B "),u(Ce,{visible:l.value,onHandleClose:A},null,8,["visible"]),p(" end "),p(" \u64CD\u4F5C\u5F39\u5C42 "),u(P,{visible:v.value,title:g.value,text:B.value,onHandleDelete:E,onHandleClose:i},null,8,["visible","title","text"]),p(" end ")]))}});var Te=V(De,[["__file","D:/project/2023/project-zzyl-v2.1/project-zzyl-admin-vue3-java/src/pages/synergy/apply/index.vue"]]);export{Te as default};
